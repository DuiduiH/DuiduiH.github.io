<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>认识小对</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Noto+Sans+SC:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    /* ===== THEME VARIABLES (DARK — default) ===== */
    :root{--bg:#0c1220;--bg2:#161e30;--primary:#e0e7ff;--accent:#38bdf8;--accent2:#a78bfa;--text:#e2e8f0;--muted:#94a3b8;--radius:16px;--gold:#fbbf24;
      --nav-bg:rgba(12,18,32,.92);--nav-border:rgba(255,255,255,.06);--frame-border:rgba(255,255,255,.06);--card-back-bg:#161e30;--card-back-border:rgba(255,255,255,.1);
      --overlay-bg:rgba(12,18,32,.88);--overlay-bg2:rgba(12,18,32,.92);--hero-grad1:#1a2744;--hero-grad2:var(--bg);--divider-line:rgba(56,189,248,.08);--divider-dot:rgba(56,189,248,.18);
      --sp-bg1:#0f172a;--sp-bg2:var(--bg2);--sp-ov-bg:rgba(15,23,42,.8);--sp-ov-box:rgba(22,30,48,.95);
      --map-btn-bg:rgba(12,18,32,.9);--map-btn-border:rgba(255,255,255,.12);
      --tl-line:rgba(255,255,255,.08);
      --hkw-color:rgba(255,255,255,.15);--hkw-hover:rgba(56,189,248,.5);
      --toggle-border:rgba(255,255,255,.12);--toggle-bg:rgba(255,255,255,.05)
    }

    /* ===== LIGHT THEME ===== */
    [data-theme="light"]{--bg:#f0f4f8;--bg2:#ffffff;--primary:#1e293b;--accent:#0369a1;--accent2:#6d28d9;--text:#334155;--muted:#64748b;--gold:#b45309;
      --nav-bg:rgba(255,255,255,.92);--nav-border:rgba(0,0,0,.06);--frame-border:rgba(0,0,0,.08);--card-back-bg:#f8fafc;--card-back-border:rgba(0,0,0,.1);
      --overlay-bg:rgba(255,255,255,.88);--overlay-bg2:rgba(255,255,255,.92);--hero-grad1:#dbeafe;--hero-grad2:#f0f4f8;--divider-line:rgba(3,105,161,.1);--divider-dot:rgba(3,105,161,.2);
      --sp-bg1:#e0f2fe;--sp-bg2:#f0f4f8;--sp-ov-bg:rgba(255,255,255,.85);--sp-ov-box:rgba(255,255,255,.95);
      --map-btn-bg:rgba(255,255,255,.9);--map-btn-border:rgba(0,0,0,.1);
      --tl-line:rgba(0,0,0,.08);
      --hkw-color:rgba(0,0,0,.1);--hkw-hover:rgba(3,105,161,.5);
      --toggle-border:rgba(0,0,0,.1);--toggle-bg:rgba(0,0,0,.04)
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth;scroll-snap-type:y proximity}
    body{font-family:"Inter","SF Pro Display","Noto Sans SC","Microsoft YaHei",-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.7;overflow-x:hidden;transition:background .35s,color .35s}

    /* ===== TOP NAV ===== */
    .nav{position:fixed;top:0;left:0;right:0;height:52px;background:var(--nav-bg);backdrop-filter:blur(12px);border-bottom:1px solid var(--nav-border);display:flex;align-items:center;justify-content:center;gap:1.6rem;padding:0 7rem 0 1rem;z-index:1000;transition:background .35s,border-color .35s}
    .nav a{color:var(--muted);text-decoration:none;font-size:.8rem;font-weight:600;transition:color .2s;white-space:nowrap}
    .nav a:hover,.nav a.active{color:var(--accent)}

    /* ===== TOGGLES ===== */
    .toggle-group{position:fixed;top:12px;right:16px;z-index:1001;display:flex;gap:8px;align-items:center}
    .lang-toggle,.theme-toggle{padding:.28rem .55rem;border:1px solid var(--toggle-border);border-radius:999px;background:var(--toggle-bg);color:var(--muted);font-size:.7rem;font-weight:700;cursor:pointer;transition:all .25s;letter-spacing:1px;user-select:none;display:flex;align-items:center;justify-content:center;line-height:1}
    .lang-toggle:hover,.theme-toggle:hover{color:var(--accent);border-color:rgba(56,189,248,.3);background:rgba(56,189,248,.06)}
    .theme-toggle{width:30px;height:30px;padding:0;border-radius:50%}
    .theme-toggle svg{width:15px;height:15px}

    /* ===== COMMON ===== */
    .sw{max-width:1100px;margin:0 auto;padding:0 1.5rem;width:100%}
    .btn{padding:.5rem 1.4rem;border:1px solid rgba(56,189,248,.3);border-radius:999px;background:rgba(56,189,248,.08);color:var(--accent);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}
    .btn:hover{background:rgba(56,189,248,.2);border-color:rgba(56,189,248,.5)}

    /* ===== SECTION PAGE ===== */
    .section-page{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:80px 0 60px;position:relative}

    /* ===== SECTION DECO (map-like elements) ===== */
    .section-page::before,.section-page::after{content:'';position:absolute;pointer-events:none;z-index:0;opacity:.4;transition:opacity .3s}
    .section-page::before{bottom:18px;left:3%;width:22px;height:34px;background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 22 34'%3E%3Crect x='9' y='18' width='4' height='16' rx='1' fill='%2378350f'/%3E%3Ccircle cx='11' cy='14' r='9' fill='%23166534'/%3E%3Ccircle cx='8' cy='11' r='3' fill='rgba(255,255,255,.12)'/%3E%3C/svg%3E") no-repeat center/contain}
    .section-page::after{bottom:22px;right:4%;width:18px;height:28px;background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 18 28'%3E%3Crect x='7' y='14' width='3' height='14' rx='1' fill='%2378350f'/%3E%3Ccircle cx='9' cy='11' r='7' fill='%2315803d'/%3E%3Ccircle cx='6' cy='9' r='2' fill='rgba(255,255,255,.1)'/%3E%3C/svg%3E") no-repeat center/contain}

    /* ===== SECTION INTRO ===== */
    .section-intro{text-align:center;margin-bottom:1.8rem;position:relative;z-index:1}
    .section-welcome{font-size:1.6rem;font-weight:800;color:var(--accent);margin-bottom:.6rem}
    .section-desc{font-size:.88rem;color:var(--muted);line-height:1.9}

    /* ===== SECTION FRAME ===== */
    .section-frame{border:1px solid var(--frame-border);border-radius:var(--radius);background:var(--bg2);overflow:hidden;padding:1.5rem;width:100%;position:relative;z-index:1;transition:background .35s,border-color .35s}
    .section-header{text-align:center;margin-bottom:1rem}
    .section-title{font-size:1.25rem;font-weight:700;color:var(--primary);margin-bottom:.3rem}
    .section-rules{font-size:.78rem;color:var(--muted);opacity:.6}

    /* ===== SECTION DIVIDER ===== */
    .section-divider{height:30vh;min-height:180px;position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0;scroll-snap-align:start}
    .section-divider::before{content:'';position:absolute;left:8%;right:8%;height:1px;background:linear-gradient(90deg,transparent,var(--divider-line) 30%,var(--divider-line) 70%,transparent)}
    .section-divider::after{content:'';position:absolute;left:50%;transform:translateX(-50%);width:8px;height:8px;border-radius:50%;background:var(--divider-dot);box-shadow:0 0 12px var(--divider-dot)}

    /* ===== HERO ===== */
    #hero{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(ellipse at 50% 30%,var(--hero-grad1),var(--hero-grad2) 70%);overflow:hidden;padding-top:52px;position:relative}
    #hero-kw{position:absolute;inset:0}
    .hkw{position:absolute;color:var(--hkw-color);font-weight:700;white-space:nowrap;animation:kwf 8s ease-in-out infinite alternate;pointer-events:auto;cursor:pointer;transition:color .25s,text-shadow .25s;user-select:none}
    .hkw:hover{color:var(--hkw-hover);text-shadow:0 0 20px rgba(56,189,248,.2)}
    @keyframes kwf{0%{transform:translateY(0) rotate(0deg)}100%{transform:translateY(-18px) rotate(2deg)}}
    #hero-c{position:relative;z-index:2;text-align:center;pointer-events:none}
    #hero-c h1{font-size:clamp(2rem,5vw,3.2rem);font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hero-sub-hint{color:var(--muted);font-size:.85rem;margin-top:.8rem;opacity:.5}
    .hero-overlay{position:fixed;inset:0;z-index:100;background:var(--overlay-bg);backdrop-filter:blur(14px);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s}
    .hero-overlay.show{opacity:1;pointer-events:auto}
    .hero-ov-content{text-align:center;max-width:500px;padding:2.5rem;cursor:pointer}
    .hero-ov-word{font-size:2.2rem;font-weight:800;color:var(--accent);margin-bottom:1rem}
    .hero-ov-desc{font-size:1.05rem;color:var(--muted);line-height:2}
    .hero-ov-dismiss{margin-top:1.5rem;font-size:.75rem;color:var(--muted);opacity:.3}

    /* ===== CARD GAME ===== */
    .interest-s{display:flex;flex-direction:column;align-items:center;padding:.5rem 0 1rem}
    .game-board{display:grid;grid-template-columns:repeat(5,88px);gap:8px}
    .card{width:88px;height:108px;perspective:600px}
    .card-inner{position:relative;width:100%;height:100%;text-align:center;transition:transform .5s;transform-style:preserve-3d;cursor:pointer}
    .card.flipped .card-inner,.card.matched .card-inner{transform:rotateY(180deg)}
    .card.matched .card-inner{box-shadow:0 0 12px rgba(56,189,248,.3)}
    .card-front,.card-back{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-weight:600;padding:6px}
    .card-front{color:#fff;transform:rotateY(180deg);justify-content:space-between;padding:8px 6px}
    .cname{font-size:10px;opacity:.85}.clogo{width:32px;height:32px;fill:currentColor;color:rgba(255,255,255,.9)}.clogo svg{width:100%;height:100%}
    .iname{font-size:12px;font-weight:700}
    .card-back{background:var(--card-back-bg);border:1.5px solid var(--card-back-border);color:var(--muted);transition:background .35s,border-color .35s}
    .card-back::after{content:'?';font-size:1.6rem;opacity:.4}
    .gstatus{margin-top:.8rem;font-size:.85rem;color:var(--muted);font-weight:500}

    /* ===== CAREER ===== */
    .career-wrap{display:flex;min-height:380px;border-radius:var(--radius);overflow:hidden;position:relative}
    .career-pane{flex:1;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1.5rem .8rem}
    .career-pane:first-child{border-right:1px solid var(--frame-border)}
    #cl,#cr{background:var(--bg2)}
    .career-hint{font-size:.72rem;color:var(--muted);margin-bottom:.6rem;opacity:.5}
    .mbag-area{position:relative;width:170px;height:280px;cursor:pointer;display:flex;flex-direction:column;align-items:center}
    .mbag-svg{width:140px;height:180px;transition:transform .7s cubic-bezier(.175,.885,.32,1.275);flex-shrink:0;transform-origin:center center}
    .mbag-area.open .mbag-svg{transform:scaleY(-1) translateY(-10px)}
    .coins-row{display:flex;gap:8px;margin-top:8px;opacity:0;transform:translateY(-18px);transition:all .6s cubic-bezier(.34,1.56,.64,1)}
    .mbag-area.open .coins-row{opacity:1;transform:translateY(0)}
    .gcoin{width:44px;height:44px;border-radius:50%;background:radial-gradient(circle at 35% 30%,#fef3c7,#fbbf24 45%,#b45309 100%);border:2.5px solid #92400e;display:flex;justify-content:center;align-items:center;font-weight:800;color:#451a03;font-size:9px;cursor:pointer;box-shadow:0 3px 10px rgba(0,0,0,.4),inset 0 -2px 5px rgba(0,0,0,.25),inset 0 2px 5px rgba(255,255,255,.35);position:relative;transition:transform .2s;opacity:0;transform:scale(0)}
    .gcoin::after{content:'';position:absolute;inset:3px;border-radius:50%;border:1.5px solid rgba(120,53,15,.25)}
    .mbag-area.open .gcoin{opacity:1;transform:scale(1)}
    .mbag-area.open .gcoin:nth-child(1){transition-delay:.15s}.mbag-area.open .gcoin:nth-child(2){transition-delay:.25s}.mbag-area.open .gcoin:nth-child(3){transition-delay:.35s}.mbag-area.open .gcoin:nth-child(4){transition-delay:.45s}
    .gcoin:hover{transform:scale(1.12)!important}
    .egg-area{position:relative;width:170px;height:280px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .egg-wrap{position:relative;width:110px;height:145px}
    .egg-top-half{position:absolute;width:100%;height:55%;top:0;clip-path:inset(0 0 45% 0);transition:all .8s cubic-bezier(.68,-.55,.265,1.55);z-index:3}
    .egg-bottom-half{position:absolute;width:100%;height:100%;top:0;z-index:1}
    .egg-area.cracked .egg-top-half{transform:translateY(-50px) rotate(-15deg);opacity:0}
    .egg-crack-line{position:absolute;top:46%;left:5%;right:5%;height:8%;z-index:4;opacity:0;transition:opacity .3s}
    .egg-area:not(.cracked):hover .egg-crack-line{opacity:.7}
    .egg-area.cracked .egg-crack-line{opacity:0}
    .cloud-reveal{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);z-index:5;transition:transform .9s cubic-bezier(.34,1.56,.64,1) .3s;cursor:pointer}
    .egg-area.cracked .cloud-reveal{transform:translate(-50%,-50%) scale(1)}
    .career-overlay{position:absolute;inset:0;background:var(--overlay-bg);backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:center;z-index:50;opacity:0;pointer-events:none;transition:opacity .35s;border-radius:var(--radius)}
    .career-overlay.show{opacity:1;pointer-events:auto}
    .career-overlay-text{font-size:2rem;font-weight:800;color:var(--primary);text-shadow:0 0 40px rgba(56,189,248,.15)}
    .career-overlay-sub{font-size:.8rem;color:var(--muted);margin-top:.4rem}

    /* ===== BUBBLES ===== */
    .kspores{position:relative;height:460px;background:linear-gradient(160deg,var(--sp-bg1),var(--sp-bg2) 50%,var(--sp-bg1));border-radius:var(--radius);overflow:hidden;transition:background .35s}
    .sp-hint{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:var(--muted);font-size:1rem;pointer-events:none;z-index:2;opacity:0;transition:opacity 1s}
    .sp-hint.vis{opacity:1}.sp-hint.fade{opacity:0;transition:opacity 1.5s}
    .sp-canvas{position:absolute;inset:0;pointer-events:none;z-index:3}
    .sp-area{position:absolute;inset:0;z-index:1}
    .sp-bub{position:absolute;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;text-align:center;font-size:12px;font-weight:600;color:rgba(255,255,255,.85);text-shadow:0 1px 3px rgba(0,0,0,.3);pointer-events:auto;transition:transform .15s;user-select:none}
    .sp-bub:hover{transform:scale(1.08)}
    .sp-ov{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:var(--sp-ov-bg);opacity:0;pointer-events:none;z-index:4;transition:opacity .4s;backdrop-filter:blur(6px)}
    .sp-ov.vis{opacity:1;pointer-events:auto}
    .sp-ov-box{max-width:400px;padding:1.8rem 2rem;background:var(--sp-ov-box);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.3);text-align:center;border:1px solid var(--frame-border);transition:background .35s,border-color .35s}
    .sp-ov-term{font-size:1.2rem;font-weight:700;margin-bottom:.5rem;color:var(--primary)}
    .sp-ov-desc{font-size:.88rem;line-height:1.8;color:var(--muted)}

    /* ===== LEAFLET MAP ===== */
    .map-inner-frame{border-radius:var(--radius);overflow:hidden}
    #leafletMap{height:400px}
    .map-footer{padding:.7rem 1rem;background:var(--bg2);display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:1rem;transition:background .35s}
    .map-legend{display:flex;flex-wrap:wrap;gap:.8rem;align-items:center;justify-content:center}
    .map-legend-btn{display:flex;align-items:center;gap:.4rem;padding:.3rem .6rem;border-radius:8px;cursor:pointer;border:1px solid transparent;transition:all .2s;font-size:.75rem;color:var(--muted)}
    .map-legend-btn:hover,.map-legend-btn.active{border-color:var(--frame-border);background:var(--toggle-bg);color:var(--primary)}
    .map-legend-btn span{font-weight:600;margin-right:.3rem}
    .ml-scale{display:flex;gap:.35rem;align-items:center}
    .ml-dot{width:9px;height:9px;border-radius:2px;flex-shrink:0;display:inline-block}
    .ml-scale small{font-size:.65rem;color:var(--muted)}
    .map-instr{text-align:center;padding:.35rem;font-size:.7rem;color:var(--muted);opacity:.45}

    /* ===== TIMELINE ===== */
    .tl-wrap{position:relative;padding:.8rem 0 .8rem 2.5rem}
    .tl-line{position:absolute;left:12px;top:0;bottom:0;width:2px;background:var(--tl-line);transition:background .35s}
    .tl-item{position:relative;padding-bottom:1.5rem}
    .tl-dot{position:absolute;left:-2.5rem;top:.35rem;width:14px;height:14px;border-radius:50%;border:2.5px solid;background:var(--bg);transition:background .35s}
    .tl-time{font-size:.78rem;color:var(--muted)}.tl-title{font-size:.9rem;font-weight:600;color:var(--primary);margin-top:.12rem}.tl-desc{font-size:.8rem;color:var(--muted);margin-top:.08rem}
    .tl-edu .tl-dot{border-color:#3b82f6}.tl-work .tl-dot{border-color:#ef4444}.tl-proj .tl-dot{border-color:#22c55e}.tl-culture .tl-dot{border-color:#f59e0b}.tl-honor .tl-dot{border-color:#a855f7}
    .tl-legend{display:flex;flex-wrap:wrap;gap:.7rem;margin-bottom:.8rem}
    .tl-legend-item{display:flex;align-items:center;gap:.3rem;font-size:.75rem;color:var(--muted)}
    .tl-legend-dot{width:9px;height:9px;border-radius:50%}

    /* ===== SKILL TREE ===== */
    .skill-tree-wrap{display:flex;flex-direction:column;align-items:center;padding:.5rem 0}
    .tree-svg{max-width:700px;width:100%}

    /* ===== CONTACT ===== */
    .contact-list{list-style:none;margin-top:.6rem}
    .contact-list li{padding:.4rem 0;font-size:.88rem;color:var(--muted)}
    .contact-list a{color:var(--accent);text-decoration:none;border-bottom:1px solid rgba(56,189,248,.2);transition:all .2s}
    .contact-list a:hover{color:var(--primary);border-color:var(--accent)}

    /* ===== ENDING + REPLAY ===== */
    .ending-section{text-align:center;padding:3rem 1.5rem;min-height:40vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.2rem;scroll-snap-align:start}
    .quote-trigger{padding:.6rem 1.8rem;border:1px solid rgba(56,189,248,.25);border-radius:999px;background:rgba(56,189,248,.06);color:var(--accent);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .3s}
    .quote-trigger:hover{background:rgba(56,189,248,.15);border-color:rgba(56,189,248,.4)}
    .replay-btn{padding:.8rem 2.5rem;border:2px solid var(--gold);border-radius:999px;background:rgba(251,191,36,.06);color:var(--gold);font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;letter-spacing:1px}
    .replay-btn:hover{background:rgba(251,191,36,.18);box-shadow:0 0 30px rgba(251,191,36,.15)}

    /* ===== QUOTE OVERLAY (full-screen) ===== */
    .quote-overlay{position:fixed;inset:0;z-index:2600;background:var(--overlay-bg);backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s;cursor:pointer}
    .quote-overlay.show{opacity:1;pointer-events:auto}
    .quote-ov-content{text-align:center;max-width:560px;padding:3rem 2rem;pointer-events:auto;cursor:default}
    .quote-ov-text{font-size:1.5rem;font-weight:600;color:var(--primary);line-height:2;font-style:italic;min-height:3rem;transition:opacity .3s}
    .quote-ov-controls{display:flex;gap:1rem;justify-content:center;margin-top:2rem}
    .quote-ov-btn{padding:.5rem 1.5rem;border:1px solid var(--frame-border);border-radius:999px;background:var(--toggle-bg);color:var(--muted);font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s}
    .quote-ov-btn:hover{color:var(--accent);border-color:var(--accent);background:rgba(56,189,248,.06)}
    .quote-ov-dismiss{margin-top:1.8rem;font-size:.72rem;color:var(--muted);opacity:.3}

    /* ===== OVERLAYS ===== */
    .map-overlay{position:fixed;inset:0;z-index:2000;background:var(--overlay-bg2);backdrop-filter:blur(16px);display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s}
    .map-overlay.open{opacity:1;pointer-events:auto}
    .map-close{position:absolute;top:20px;right:28px;font-size:2rem;color:var(--muted);cursor:pointer;z-index:10;width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--toggle-bg);transition:all .2s}
    .map-close:hover{color:var(--primary);background:rgba(255,255,255,.1)}
    .map-overlay-title{color:var(--gold);font-size:.8rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;margin-bottom:1rem;font-family:"Courier New",monospace;opacity:.7}
    .illustrated-map{width:92%;max-width:1200px;height:auto}
    .map-building{cursor:pointer;transition:transform .2s,filter .2s,opacity .3s;transform-origin:center bottom;opacity:.2}
    .map-building.unlocked{opacity:1}
    .map-building.unlocked:hover{transform:translateY(-5px);filter:drop-shadow(0 8px 16px rgba(251,191,36,.25))}
    .bld-glow{opacity:0;transition:opacity .3s}
    .map-building.active .bld-glow{opacity:1}
    .map-building text{pointer-events:none}
    .map-label{font-size:12px;fill:var(--primary);font-weight:700;text-anchor:middle}
    .map-sublabel{font-size:9px;fill:var(--muted);font-weight:600;text-anchor:middle}

    #map-btn{position:fixed;bottom:16px;right:20px;z-index:1000;cursor:pointer;border-radius:10px;overflow:hidden;border:2px solid var(--map-btn-border);box-shadow:0 4px 20px rgba(0,0,0,.2);transition:all .3s;background:var(--map-btn-bg)}
    #map-btn:hover{transform:scale(1.08);box-shadow:0 6px 28px rgba(0,0,0,.3);border-color:var(--accent)}
    #map-btn svg{display:block}

    .unlock-overlay{position:fixed;inset:0;z-index:2500;background:var(--overlay-bg2);backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;flex-direction:column;opacity:0;pointer-events:none;transition:opacity .5s;cursor:pointer}
    .unlock-overlay.show{opacity:1;pointer-events:auto}
    .unlock-congrats{font-size:.9rem;color:var(--muted);margin-bottom:.8rem;letter-spacing:2px}
    .unlock-scene{font-size:1.8rem;font-weight:800;color:var(--gold);animation:unlockPulse .6s ease both}
    .unlock-dismiss{margin-top:2rem;font-size:.75rem;color:var(--muted);opacity:.3}
    @keyframes unlockPulse{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}

    .completion-overlay{position:fixed;inset:0;z-index:3000;background:var(--overlay-bg2);backdrop-filter:blur(18px);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .6s;cursor:pointer}
    .completion-overlay.show{opacity:1;pointer-events:auto}
    .completion-content{text-align:center;max-width:520px;padding:3rem;animation:completionIn .8s ease .2s both}
    @keyframes completionIn{from{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
    .completion-content h2{font-size:1.8rem;color:var(--gold);font-weight:700;margin-bottom:1.5rem}
    .completion-content p{font-size:1rem;color:var(--muted);line-height:2.2;margin-bottom:.2rem}
    .completion-close{margin-top:2rem;font-size:.8rem;color:var(--muted);opacity:.3}

    @media(max-width:600px){
      .nav{gap:.5rem;padding:0 6rem 0 .5rem;height:46px;overflow-x:auto;justify-content:flex-start;-webkit-overflow-scrolling:touch}
      .nav a{font-size:.68rem;flex-shrink:0}
      .toggle-group{top:10px;right:10px;gap:5px}
      .lang-toggle{font-size:.6rem;padding:.2rem .4rem}
      .theme-toggle{width:26px;height:26px}
      .theme-toggle svg{width:12px;height:12px}
      .section-page{padding:58px 0 30px}
      .section-welcome{font-size:1.3rem}
      .game-board{grid-template-columns:repeat(5,58px);gap:4px}
      .card{width:58px;height:72px}.clogo{width:18px;height:18px}.iname{font-size:8px}.cname{font-size:7px}
      .career-wrap{flex-direction:column;min-height:auto}
      .career-pane:first-child{border-right:none;border-bottom:1px solid var(--frame-border)}
      .illustrated-map{width:98%}
      .kspores{height:360px}
      #leafletMap{height:300px}
      .section-divider{height:20vh;min-height:120px}
      .map-legend{flex-direction:column;gap:.4rem}
      .section-page::before,.section-page::after{display:none}
    }
  </style>
</head>
<body>

<!-- ===== TOP NAV ===== -->
<nav class="nav">
  <a href="#hero" data-i18n="nav-hero">我是谁</a>
  <a href="#interest" data-i18n="nav-interest">兴趣</a>
  <a href="#career" data-i18n="nav-career">工作</a>
  <a href="#study" data-i18n="nav-study">学习</a>
  <a href="#worldmap" data-i18n="nav-worldmap">足迹</a>
  <a href="#skills" data-i18n="nav-skills">技能</a>
  <a href="#timelines" data-i18n="nav-timelines">经历</a>
  <a href="#takeaway" data-i18n="nav-takeaway">联系XD</a>
</nav>
<div class="toggle-group">
  <div class="lang-toggle" id="langToggle">EN</div>
  <div class="theme-toggle" id="themeToggle" title="Toggle theme">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
  </div>
</div>

<!-- ═══════════ HERO ═══════════ -->
<div class="section-page" id="hero" data-map-id="hero">
  <div id="hero-kw"></div>
  <div id="hero-c">
    <h1>Who am I?</h1>
    <p class="hero-sub-hint" data-i18n="hero-hint">点击关键词了解更多</p>
  </div>
</div>

<div id="heroOverlay" class="hero-overlay">
  <div class="hero-ov-content">
    <div class="hero-ov-word" id="heroOvWord"></div>
    <div class="hero-ov-desc" id="heroOvDesc"></div>
    <div class="hero-ov-dismiss" data-i18n="dismiss-click">点击任意处关闭</div>
  </div>
</div>

<div class="section-divider" data-next-id="interest" data-next-label="兴趣游乐场"></div>

<!-- ═══════════ 兴趣游乐场 ═══════════ -->
<div class="section-page" id="interest" data-map-id="interest">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="interest-welcome">欢迎来到兴趣游乐场</div>
      <div class="section-desc" data-i18n-html="interest-desc">了解一个人，从TA的兴趣开始<br>翻翻卡片，看看小对藏了哪些宝藏爱好</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="interest-title">兴趣对对碰</div>
        <div class="section-rules" data-i18n="interest-rules">翻开两张同类卡片即可配对，点击「打乱重来」可重新开始</div>
      </div>
      <div class="interest-s">
        <div style="margin-bottom:.8rem"><button class="btn" id="shuffleBtn" data-i18n="shuffle-btn">打乱重来</button></div>
        <div class="game-board" id="gameBoard"></div>
        <div class="gstatus" id="gStatus" data-i18n="game-hint">翻开两张同类卡片试试看！</div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="career" data-next-label="事业大厦"></div>

<!-- ═══════════ 事业大厦 ═══════════ -->
<div class="section-page" id="career" data-map-id="career">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="career-welcome">欢迎来到事业大厦</div>
      <div class="section-desc" data-i18n-html="career-desc">小对的职业版图就藏在这里<br>点开钱袋和鸡蛋，来一探究竟</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="career-title">金融 × 初创</div>
        <div class="section-rules" data-i18n="career-rules">点击左边的钱袋和右边的鸡蛋，探索小对的事业版图</div>
      </div>
      <div class="career-wrap" id="careerWrap">
        <div class="career-pane" id="cl">
          <div class="career-hint" data-i18n="career-hint-bag">点击钱袋</div>
          <div class="mbag-area" id="mbag">
            <svg class="mbag-svg" viewBox="0 0 160 200" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="bg1" x1="0" y1="0" x2=".3" y2="1"><stop offset="0%" stop-color="#d4a017"/><stop offset="50%" stop-color="#b8860b"/><stop offset="100%" stop-color="#8b6914"/></linearGradient>
                <radialGradient id="bs1" cx=".35" cy=".3"><stop offset="0%" stop-color="rgba(255,255,255,.3)"/><stop offset="100%" stop-color="transparent"/></radialGradient>
                <linearGradient id="rope" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#a0522d"/><stop offset="100%" stop-color="#6b3a1f"/></linearGradient>
              </defs>
              <ellipse cx="80" cy="192" rx="55" ry="6" fill="rgba(0,0,0,.3)"/>
              <path d="M32,52 C8,75 8,140 16,165 C24,185 55,195 80,195 C105,195 136,185 144,165 C152,140 152,75 128,52 Z" fill="url(#bg1)" stroke="#6b3a1f" stroke-width="1"/>
              <path d="M32,52 C8,75 8,140 16,165 C24,185 55,195 80,195 C105,195 136,185 144,165 C152,140 152,75 128,52 Z" fill="url(#bs1)"/>
              <path d="M45,52 Q45,38 55,30 L105,30 Q115,38 115,52 Z" fill="url(#bg1)" stroke="#6b3a1f" stroke-width="1"/>
              <ellipse cx="80" cy="52" rx="38" ry="6" fill="none" stroke="url(#rope)" stroke-width="4"/>
              <text x="80" y="140" text-anchor="middle" font-size="52" fill="#6b3a1f" font-weight="900" font-family="Georgia,serif" opacity=".4">$</text>
            </svg>
            <div class="coins-row">
              <div class="gcoin" data-co="期货">期货</div>
              <div class="gcoin" data-co="律所IPO">律所</div>
              <div class="gcoin" data-co="私募">私募</div>
              <div class="gcoin" data-co="券商投行">投行</div>
            </div>
          </div>
        </div>
        <div class="career-pane" id="cr">
          <div class="career-hint" data-i18n="career-hint-egg">点击鸡蛋</div>
          <div class="egg-area" id="eggArea">
            <div class="egg-wrap">
              <svg class="egg-bottom-half" viewBox="0 0 130 170">
                <defs><radialGradient id="eg1" cx=".45" cy=".45"><stop offset="0%" stop-color="#faf5eb"/><stop offset="50%" stop-color="#ede0cc"/><stop offset="100%" stop-color="#c4a77d"/></radialGradient></defs>
                <ellipse cx="65" cy="92" rx="55" ry="72" fill="url(#eg1)"/>
                <ellipse cx="50" cy="62" rx="16" ry="22" fill="rgba(255,255,255,.15)" transform="rotate(-15 50 62)"/>
              </svg>
              <svg class="egg-top-half" viewBox="0 0 130 170">
                <defs><radialGradient id="eg2" cx=".45" cy=".45"><stop offset="0%" stop-color="#faf5eb"/><stop offset="50%" stop-color="#ede0cc"/><stop offset="100%" stop-color="#c4a77d"/></radialGradient></defs>
                <ellipse cx="65" cy="92" rx="55" ry="72" fill="url(#eg2)"/>
                <ellipse cx="50" cy="62" rx="16" ry="22" fill="rgba(255,255,255,.18)" transform="rotate(-15 50 62)"/>
              </svg>
              <svg class="egg-crack-line" viewBox="0 0 120 12"><path d="M0,6 L12,2 L22,10 L35,1 L48,11 L58,3 L72,10 L82,2 L95,9 L105,3 L120,6" fill="none" stroke="#654321" stroke-width="3" stroke-linecap="round"/></svg>
            </div>
            <div class="cloud-reveal" id="cloudReveal">
              <svg width="130" height="88" viewBox="0 0 140 95"><defs><radialGradient id="cg1" cx=".4" cy=".3"><stop offset="0%" stop-color="#f0f4ff"/><stop offset="100%" stop-color="#c7d2fe"/></radialGradient><radialGradient id="cg2" cx=".5" cy=".4"><stop offset="0%" stop-color="#e0e7ff"/><stop offset="100%" stop-color="#a5b4fc"/></radialGradient><filter id="cshadow"><feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity=".15"/></filter></defs><g filter="url(#cshadow)"><ellipse cx="70" cy="58" rx="55" ry="25" fill="url(#cg1)"/><circle cx="42" cy="40" r="25" fill="url(#cg1)"/><circle cx="75" cy="33" r="28" fill="url(#cg2)"/><circle cx="100" cy="45" r="20" fill="url(#cg1)"/></g><text x="70" y="63" text-anchor="middle" font-size="13" fill="#4338ca" font-weight="700">沄视科技</text></svg>
            </div>
          </div>
        </div>
        <div class="career-overlay" id="careerOv">
          <div style="text-align:center;cursor:pointer"><div class="career-overlay-text" id="careerOvText"></div><div class="career-overlay-sub" data-i18n="dismiss-click">点击任意处关闭</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="study" data-next-label="学习湖泊"></div>

<!-- ═══════════ 学习湖泊 ═══════════ -->
<div class="section-page" id="study" data-map-id="study">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="study-welcome">欢迎来到学习湖泊</div>
      <div class="section-desc" data-i18n-html="study-desc">学习湖泊里漂浮着许多知识泡泡<br>戳开一个，学习一个新词汇吧</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="study-title">知识泡泡</div>
        <div class="section-rules" data-i18n="study-rules">湖里的泡泡装着各种知识——戳开它，随机学一个新词汇</div>
      </div>
      <div class="kspores" id="kSpores">
        <div class="sp-hint" id="spHint" data-i18n="bubble-hint">戳开泡泡试试看</div>
        <canvas class="sp-canvas" id="spCanvas"></canvas>
        <div class="sp-area" id="spArea"></div>
        <div class="sp-ov" id="spOv">
          <div class="sp-ov-box"><div class="sp-ov-term" id="spOvTerm"></div><div class="sp-ov-desc" id="spOvDesc"></div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="worldmap" data-next-label="个人杂货铺"></div>

<!-- ═══════════ 个人杂货铺（世界地图） ═══════════ -->
<div class="section-page" id="worldmap" data-map-id="worldmap">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="worldmap-welcome">欢迎来到个人杂货铺</div>
      <div class="section-desc" data-i18n-html="worldmap-desc">小对的足迹遍布世界各地<br>来看看她都去过哪里、会说什么语言</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="worldmap-title">我与世界</div>
      </div>
      <div class="map-inner-frame">
        <div id="leafletMap"></div>
        <div class="map-footer">
          <div class="map-legend">
            <div class="map-legend-btn active" data-mode="visit">
              <span data-i18n="map-visit">我去过</span>
              <div class="ml-scale">
                <span class="ml-dot" style="background:#93c5fd"></span><small data-i18n="map-travel">旅行</small>
                <span class="ml-dot" style="background:#3b82f6"></span><small data-i18n="map-short">短居</small>
                <span class="ml-dot" style="background:#1d4ed8"></span><small data-i18n="map-long">长住</small>
              </div>
            </div>
            <div class="map-legend-btn" data-mode="lang">
              <span data-i18n="map-lang">我会说这里的语言</span>
              <div class="ml-scale">
                <span class="ml-dot" style="background:#d8b4fe"></span><small data-i18n="map-beginner">入门</small>
                <span class="ml-dot" style="background:#a78bfa"></span><small data-i18n="map-proficient">熟练</small>
                <span class="ml-dot" style="background:#7c3aed"></span><small data-i18n="map-fluent">精通</small>
                <span class="ml-dot" style="background:#4c1d95"></span><small data-i18n="map-native">母语</small>
              </div>
            </div>
          </div>
          <div class="map-instr" data-i18n="map-instr">点击标记切换 · 滚轮缩放 · 拖拽平移</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="skills" data-next-label="技能花园"></div>

<!-- ═══════════ 技能花园 ═══════════ -->
<div class="section-page" id="skills" data-map-id="skills">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="skills-welcome">欢迎来到技能花园</div>
      <div class="section-desc" data-i18n-html="skills-desc">每一片叶子都是一项技能<br>一起看看小对的技能全景图</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="skills-title">个人技能树</div>
      </div>
      <div class="skill-tree-wrap" id="stWrap"></div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="timelines" data-next-label="钟表店"></div>

<!-- ═══════════ 钟表店（时间轴） ═══════════ -->
<div class="section-page" id="timelines" data-map-id="timelines">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="timelines-welcome">欢迎来到钟表店</div>
      <div class="section-desc" data-i18n-html="timelines-desc">时间记录着每一段经历<br>跟着时间轴，回顾小对的成长足迹</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="timelines-title">时间轴</div>
        <div class="section-rules" data-i18n="timelines-rules">按时间顺序记录学业、工作、项目、文化和荣誉</div>
      </div>
      <div class="tl-legend">
        <div class="tl-legend-item"><div class="tl-legend-dot" style="background:#3b82f6"></div><span data-i18n="tl-edu">学业</span></div>
        <div class="tl-legend-item"><div class="tl-legend-dot" style="background:#ef4444"></div><span data-i18n="tl-work">工作</span></div>
        <div class="tl-legend-item"><div class="tl-legend-dot" style="background:#22c55e"></div><span data-i18n="tl-proj">项目</span></div>
        <div class="tl-legend-item"><div class="tl-legend-dot" style="background:#f59e0b"></div><span data-i18n="tl-culture">文化</span></div>
        <div class="tl-legend-item"><div class="tl-legend-dot" style="background:#a855f7"></div><span data-i18n="tl-honor">荣誉</span></div>
      </div>
      <div class="tl-wrap" id="tlWrap"><div class="tl-line"></div></div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="takeaway" data-next-label="探索完成"></div>

<!-- ═══════════ 联系XD ═══════════ -->
<div class="section-page" id="takeaway" data-map-id="takeaway">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="takeaway-welcome">感谢你的探索</div>
      <div class="section-desc" data-i18n="takeaway-desc">希望你对小对有了更深的了解</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="takeaway-title">联系方式</div>
      </div>
      <div style="padding:.5rem 1rem">
        <ul class="contact-list">
          <li><span data-i18n="contact-wechat">微信</span>：Astrid_XD</li>
          <li><span data-i18n="contact-email">邮箱</span>：<a href="mailto:xiaoduixd@gmail.com">xiaoduixd@gmail.com</a></li>
          <li><span data-i18n="contact-linkedin">领英</span>：<a href="https://www.linkedin.com/in/duiduihu" target="_blank" rel="noopener">linkedin.com/in/duiduihu</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="ending" data-next-label=""></div>

<!-- ═══════════ ENDING + REPLAY ═══════════ -->
<div class="ending-section" id="ending" data-map-id="ending">
  <p style="color:var(--muted);font-size:.85rem;opacity:.5" data-i18n="ending-label">旅途的终点</p>
  <button class="quote-trigger" id="quoteTrigger" data-i18n="quote-trigger">点击查看 XD 送给你的一句话</button>
  <button class="replay-btn" onclick="resetApp()" data-i18n="replay-btn">再玩一次</button>
</div>

<!-- ═══════════ QUOTE OVERLAY ═══════════ -->
<div id="quoteOverlay" class="quote-overlay">
  <div class="quote-ov-content">
    <div class="quote-ov-text" id="quoteOvText"></div>
    <div class="quote-ov-controls">
      <button class="quote-ov-btn" id="quotePrev" data-i18n="quote-prev">上一句</button>
      <button class="quote-ov-btn" id="quoteNext" data-i18n="quote-next">换一句</button>
    </div>
    <div class="quote-ov-dismiss" data-i18n="quote-close">点击空白处关闭</div>
  </div>
</div>

<!-- ═══════════ ILLUSTRATED MAP ═══════════ -->
<div id="map-overlay" class="map-overlay">
  <div class="map-close">&times;</div>
  <div class="map-overlay-title">— 冒险地图 —</div>
  <svg class="illustrated-map" viewBox="0 0 1400 620" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="msky" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#1a2744"/><stop offset="60%" stop-color="#1e3a5f"/><stop offset="100%" stop-color="#0f2940"/></linearGradient>
      <linearGradient id="mgrass" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#166534"/><stop offset="100%" stop-color="#14532d"/></linearGradient>
      <linearGradient id="mwater" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#0ea5e9" stop-opacity=".6"/><stop offset="100%" stop-color="#0369a1" stop-opacity=".4"/></linearGradient>
    </defs>
    <rect width="1400" height="620" fill="url(#msky)"/>
    <circle cx="120" cy="50" r="1.5" fill="#fbbf24" opacity=".5"/><circle cx="520" cy="60" r="1.5" fill="#fbbf24" opacity=".6"/><circle cx="950" cy="45" r="1.5" fill="#fbbf24" opacity=".5"/><circle cx="1300" cy="55" r="1.5" fill="#fbbf24" opacity=".5"/>
    <circle cx="300" cy="30" r="1" fill="#fff" opacity=".4"/><circle cx="740" cy="25" r="1" fill="#fff" opacity=".3"/><circle cx="1150" cy="35" r="1" fill="#fff" opacity=".4"/>
    <path d="M0,420 C80,400 160,430 280,415 C400,400 500,440 620,425 C700,415 760,445 850,430 C940,415 1020,440 1120,425 C1220,410 1320,435 1400,420 L1400,620 L0,620 Z" fill="url(#mgrass)"/>
    <path d="M0,460 C120,445 250,470 400,455 C550,440 650,475 780,460 C900,445 1000,470 1150,455 L1400,455 L1400,620 L0,620 Z" fill="#15803d" opacity=".5"/>
    <ellipse cx="720" cy="485" rx="110" ry="30" fill="url(#mwater)"/>
    <path d="M120,420 C200,405 260,415 320,408 C420,400 480,418 530,412 C600,404 660,430 720,445 C790,430 860,408 940,415 C1020,422 1060,410 1120,415 C1180,420 1230,408 1280,412" fill="none" stroke="rgba(212,175,116,.25)" stroke-width="3" stroke-dasharray="8 5"/>
    <!-- Cinema --><g class="map-building unlocked" data-target="hero"><rect x="70" y="350" width="70" height="65" rx="3" fill="#4338ca"/><rect x="70" y="350" width="70" height="8" rx="3" fill="#6366f1"/><rect x="78" y="365" width="54" height="35" rx="2" fill="#312e81"/><circle cx="80" cy="354" r="1.5" fill="#fbbf24"/><circle cx="90" cy="354" r="1.5" fill="#f87171"/><circle cx="100" cy="354" r="1.5" fill="#34d399"/><circle cx="110" cy="354" r="1.5" fill="#60a5fa"/><circle cx="120" cy="354" r="1.5" fill="#fbbf24"/><circle cx="130" cy="354" r="1.5" fill="#f87171"/><text x="105" y="432" class="map-label">个人经历电影院</text><text x="105" y="444" class="map-sublabel">Who am I</text></g>
    <!-- Playground --><g class="map-building" data-target="interest"><circle cx="315" cy="365" r="35" fill="none" stroke="#ec4899" stroke-width="2.5" opacity=".7"/><circle cx="315" cy="365" r="3" fill="#fbbf24"/><circle cx="315" cy="330" r="5" fill="#f472b6"/><circle cx="350" cy="365" r="5" fill="#a78bfa"/><circle cx="315" cy="400" r="5" fill="#34d399"/><circle cx="280" cy="365" r="5" fill="#60a5fa"/><rect x="310" y="400" width="10" height="12" fill="#7c3aed" rx="1"/><text x="315" y="432" class="map-label">兴趣游乐场</text></g>
    <!-- Career Tower --><g class="map-building" data-target="career"><rect x="500" y="320" width="56" height="92" rx="2" fill="#92400e"/><rect x="500" y="320" width="56" height="92" rx="2" fill="rgba(251,191,36,.15)"/><polygon points="528,300 518,320 538,320" fill="#b45309"/><circle cx="528" cy="310" r="4" fill="#fbbf24" opacity=".6"/><rect x="508" y="332" width="10" height="10" rx="1" fill="rgba(254,243,199,.25)"/><rect x="524" y="332" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="538" y="332" width="10" height="10" rx="1" fill="rgba(254,243,199,.25)"/><rect x="508" y="350" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="524" y="350" width="10" height="10" rx="1" fill="rgba(254,243,199,.25)"/><rect x="538" y="350" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="521" y="393" width="14" height="18" rx="7" fill="rgba(120,53,15,.6)"/><text x="528" y="432" class="map-label">事业大厦</text></g>
    <!-- Lake + School --><g class="map-building" data-target="study"><rect x="660" y="400" width="55" height="45" rx="2" fill="#dc2626"/><polygon points="655,400 687,375 720,400" fill="#991b1b"/><rect x="682" y="380" width="10" height="15" fill="#b91c1c"/><circle cx="687" cy="378" r="4" fill="#fbbf24" opacity=".6"/><rect x="668" y="412" width="10" height="10" rx="1" fill="rgba(254,243,199,.3)"/><rect x="686" y="412" width="10" height="10" rx="1" fill="rgba(254,243,199,.25)"/><text x="720" y="510" class="map-label">学习湖泊</text></g>
    <!-- Newsstand --><g class="map-building" data-target="worldmap"><rect x="908" y="368" width="48" height="42" rx="2" fill="#047857"/><path d="M903,368 L961,368 L956,358 L908,358 Z" fill="#059669"/><rect x="914" y="375" width="34" height="20" rx="1" fill="rgba(209,250,229,.2)"/><text x="932" y="406" text-anchor="middle" font-size="6" fill="rgba(209,250,229,.6)" font-weight="700">MAPS</text><text x="932" y="432" class="map-label">个人杂货铺</text></g>
    <!-- Clock Shop --><g class="map-building" data-target="timelines"><rect x="1080" y="350" width="55" height="62" rx="2" fill="#5b21b6"/><circle cx="1107" cy="372" r="18" fill="#1e1b4b" stroke="#a78bfa" stroke-width="1.5"/><line x1="1107" y1="372" x2="1107" y2="361" stroke="#fbbf24" stroke-width="1.5" stroke-linecap="round"/><line x1="1107" y1="372" x2="1116" y2="375" stroke="#e0e7ff" stroke-width="1" stroke-linecap="round"/><circle cx="1107" cy="372" r="2" fill="#fbbf24"/><rect x="1100" y="395" width="14" height="16" rx="2" fill="rgba(91,33,182,.6)"/><text x="1107" y="432" class="map-label">钟表店</text></g>
    <!-- Skill Tree --><g class="map-building" data-target="skills"><rect x="1258" y="395" width="12" height="25" rx="2" fill="#78350f" opacity=".7"/><circle cx="1264" cy="370" r="28" fill="#166534" opacity=".7"/><circle cx="1248" cy="378" r="20" fill="#15803d" opacity=".6"/><circle cx="1280" cy="375" r="22" fill="#14532d" opacity=".6"/><circle cx="1264" cy="355" r="18" fill="#22c55e" opacity=".4"/><circle cx="1250" cy="365" r="4" fill="#fbbf24" opacity=".6"/><circle cx="1275" cy="358" r="3.5" fill="#f87171" opacity=".6"/><text x="1264" y="432" class="map-label">技能花园</text></g>
    <!-- Trees --><g opacity=".3"><rect x="192" y="410" width="5" height="12" fill="#78350f"/><circle cx="194" cy="405" r="10" fill="#166534"/><rect x="452" y="415" width="4" height="10" fill="#78350f"/><circle cx="454" cy="410" r="8" fill="#15803d"/><rect x="840" y="418" width="4" height="10" fill="#78350f"/><circle cx="842" cy="413" r="8" fill="#166534"/></g>
  </svg>
</div>

<!-- ═══════════ MINIMAP BUTTON ═══════════ -->
<div id="map-btn">
  <svg viewBox="0 0 90 56" width="90" height="56" xmlns="http://www.w3.org/2000/svg">
    <rect width="90" height="56" rx="6" fill="#0f2940"/>
    <path d="M0,34 C15,30 25,36 40,32 C55,28 65,35 80,31 C85,30 88,32 90,33 L90,56 L0,56 Z" fill="#166534" opacity=".6"/>
    <path d="M0,40 C20,37 35,42 50,38 C65,34 80,40 90,38 L90,56 L0,56 Z" fill="#15803d" opacity=".4"/>
    <ellipse cx="50" cy="42" rx="10" ry="4" fill="#0ea5e9" opacity=".35"/>
    <circle id="mini-dot-hero" class="mini-dot" cx="12" cy="32" r="3" fill="#374151" opacity=".4"/>
    <circle id="mini-dot-interest" class="mini-dot" cx="24" cy="30" r="3" fill="#374151" opacity=".4"/>
    <circle id="mini-dot-career" class="mini-dot" cx="38" cy="31" r="3" fill="#374151" opacity=".4"/>
    <circle id="mini-dot-study" class="mini-dot" cx="50" cy="36" r="3" fill="#374151" opacity=".4"/>
    <circle id="mini-dot-worldmap" class="mini-dot" cx="62" cy="32" r="3" fill="#374151" opacity=".4"/>
    <circle id="mini-dot-timelines" class="mini-dot" cx="72" cy="30" r="3" fill="#374151" opacity=".4"/>
    <circle id="mini-dot-skills" class="mini-dot" cx="82" cy="31" r="3" fill="#374151" opacity=".4"/>
    <path d="M12,32 C18,30 20,31 24,30 C30,29 34,31 38,31 C44,31 47,34 50,36 C54,34 58,32 62,32 C66,31 69,30 72,30 C76,30 79,31 82,31" fill="none" stroke="rgba(212,175,116,.3)" stroke-width="1" stroke-dasharray="2 2"/>
    <circle cx="15" cy="10" r=".8" fill="#fbbf24" opacity=".5"/><circle cx="45" cy="8" r=".8" fill="#fff" opacity=".3"/><circle cx="75" cy="12" r=".8" fill="#fbbf24" opacity=".4"/>
    <text x="45" y="22" text-anchor="middle" font-size="8" fill="rgba(255,255,255,.45)" font-weight="700" letter-spacing="3" font-family="Courier New,monospace">MAP</text>
  </svg>
</div>

<!-- ═══════════ OVERLAYS ═══════════ -->
<div id="unlockOverlay" class="unlock-overlay">
  <div class="unlock-congrats" data-i18n="unlock-congrats">恭喜你解锁下一场景</div>
  <div class="unlock-scene" id="unlockText"></div>
  <div class="unlock-dismiss" data-i18n="unlock-dismiss">点击任意处继续</div>
</div>

<div id="completionOverlay" class="completion-overlay">
  <div class="completion-content">
    <h2 data-i18n="completion-title">恭喜你顺利通关！</h2>
    <p data-i18n="completion-p1">认识小对的小游戏到这里就结束啦，</p>
    <p data-i18n="completion-p2">但小对和你的故事才刚刚开始，</p>
    <p data-i18n="completion-p3">让我们一起继续探索吧，</p>
    <p data-i18n="completion-p4">相信她一定会给你带来惊喜！</p>
    <div class="completion-close" data-i18n="dismiss-click">点击任意处关闭</div>
  </div>
</div>

<!-- ═══════════ SCRIPTS ═══════════ -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="js/0.1-whoami.js"></script>
<script src="js/1.1-interest.js"></script>
<script src="js/1.2-career.js"></script>
<script src="js/1.3-learning.js"></script>
<script src="js/1.4-aboutme.js"></script>
<script src="js/2.1-timeline.js"></script>
<script src="js/2.2-skilltree.js"></script>
<script src="js/app.js"></script>
</body>
</html>
