<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>认识小对</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Noto+Sans+SC:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    :root{--bg:#0c1220;--bg2:#161e30;--primary:#e0e7ff;--accent:#38bdf8;--accent2:#a78bfa;--text:#e2e8f0;--muted:#94a3b8;--radius:16px;--gold:#fbbf24;
      --nav-bg:rgba(12,18,32,.92);--nav-border:rgba(255,255,255,.06);--frame-border:rgba(255,255,255,.06);--card-back-bg:#161e30;--card-back-border:rgba(255,255,255,.1);
      --overlay-bg:rgba(12,18,32,.88);--overlay-bg2:rgba(12,18,32,.92);--hero-grad1:#1a2744;--hero-grad2:var(--bg);--divider-line:rgba(56,189,248,.08);--divider-dot:rgba(56,189,248,.18);
      --sp-bg1:#0f172a;--sp-bg2:var(--bg2);--sp-ov-bg:rgba(15,23,42,.8);--sp-ov-box:rgba(22,30,48,.95);
      --map-btn-bg:rgba(12,18,32,.9);--map-btn-border:rgba(255,255,255,.12);
      --tl-line:rgba(255,255,255,.08);
      --hkw-color:rgba(129,140,248,.22);--hkw-hover:rgba(251,191,36,.55);
      --toggle-border:rgba(255,255,255,.12);--toggle-bg:rgba(255,255,255,.05);
      --bub-text:rgba(255,255,255,.85);--bub-shadow:rgba(0,0,0,.3);
      --msky1:#1a2744;--msky2:#1e3a5f;--msky3:#0f2940;--mgrass1:#166534;--mgrass2:#14532d;--mgrass3:#15803d
    }
    [data-theme="light"]{--bg:#f0f4f8;--bg2:#ffffff;--primary:#1e293b;--accent:#0369a1;--accent2:#6d28d9;--text:#334155;--muted:#64748b;--gold:#b45309;
      --nav-bg:rgba(255,255,255,.92);--nav-border:rgba(0,0,0,.06);--frame-border:rgba(0,0,0,.08);--card-back-bg:#f8fafc;--card-back-border:rgba(0,0,0,.1);
      --overlay-bg:rgba(255,255,255,.88);--overlay-bg2:rgba(255,255,255,.92);--hero-grad1:#dbeafe;--hero-grad2:#f0f4f8;--divider-line:rgba(3,105,161,.1);--divider-dot:rgba(3,105,161,.2);
      --sp-bg1:#e0f2fe;--sp-bg2:#f0f4f8;--sp-ov-bg:rgba(255,255,255,.85);--sp-ov-box:rgba(255,255,255,.95);
      --map-btn-bg:rgba(255,255,255,.9);--map-btn-border:rgba(0,0,0,.1);
      --tl-line:rgba(0,0,0,.08);
      --hkw-color:rgba(99,102,241,.15);--hkw-hover:rgba(217,119,6,.55);
      --toggle-border:rgba(0,0,0,.1);--toggle-bg:rgba(0,0,0,.04);
      --bub-text:rgba(0,0,0,.75);--bub-shadow:rgba(255,255,255,.3);
      --msky1:#7EC8E3;--msky2:#A8D8EA;--msky3:#C8E6F0;--mgrass1:#4CAF50;--mgrass2:#388E3C;--mgrass3:#66BB6A
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth;scroll-snap-type:y mandatory}
    body{font-family:"Inter","SF Pro Display","Noto Sans SC","Microsoft YaHei",-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.7;overflow-x:hidden;transition:background .35s,color .35s}

    .nav{position:fixed;top:0;left:0;right:0;height:52px;background:var(--nav-bg);backdrop-filter:blur(12px);border-bottom:1px solid var(--nav-border);display:flex;align-items:center;justify-content:center;gap:2rem;padding:0 8rem 0 1.5rem;z-index:1000;transition:background .35s,border-color .35s;overflow:visible}
    .nav a{color:var(--muted);text-decoration:none;font-size:.78rem;font-weight:600;transition:color .2s;white-space:nowrap;display:flex;align-items:center;gap:.35rem;flex-shrink:0;position:relative}
    .nav a:hover,.nav a.active{color:var(--accent)}
    .nav a .nav-icon{width:16px;height:16px;flex-shrink:0;display:block}
    .nav a .nav-icon svg{width:100%;height:100%;fill:none;stroke:currentColor;stroke-width:1.8;stroke-linecap:round;stroke-linejoin:round}
    .nav a .nav-label{display:inline}
    .nav a::after{content:attr(data-tooltip);position:absolute;top:100%;left:50%;transform:translateX(-50%);padding:3px 8px;border-radius:4px;background:var(--bg2);color:var(--text);font-size:.65rem;font-weight:500;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .2s;border:1px solid var(--frame-border);margin-top:4px;display:none;z-index:1001;box-shadow:0 2px 8px rgba(0,0,0,.15)}
    .nav a:hover::after{opacity:1}

    .toggle-group{position:fixed;top:12px;right:16px;z-index:1001;display:flex;gap:8px;align-items:center}
    .lang-toggle,.theme-toggle{width:32px;height:32px;border:1px solid var(--toggle-border);border-radius:50%;background:var(--toggle-bg);color:var(--muted);font-size:.65rem;font-weight:700;cursor:pointer;transition:all .25s;letter-spacing:.5px;user-select:none;display:flex;align-items:center;justify-content:center;line-height:1;padding:0}
    .lang-toggle:hover,.theme-toggle:hover{color:var(--accent);border-color:rgba(56,189,248,.3)}
    .theme-toggle svg{width:15px;height:15px}

    .sw{max-width:1100px;margin:0 auto;padding:0 1rem;width:100%;box-sizing:border-box}
    .btn{padding:.5rem 1.4rem;border:1px solid rgba(56,189,248,.3);border-radius:999px;background:rgba(56,189,248,.08);color:var(--accent);font-size:.85rem;font-weight:600;cursor:pointer;transition:all .25s;display:inline-flex;align-items:center;gap:.4rem}
    .btn:hover{background:rgba(56,189,248,.18);border-color:rgba(56,189,248,.5);transform:scale(1.04)}
    .btn:active{transform:scale(.97)}
    .btn .btn-icon{display:inline-block;transition:transform .3s}
    .btn:hover .btn-icon{transform:rotate(180deg)}

    .map-star{transition:opacity .35s}.map-sun{display:none;transition:opacity .35s}
    [data-theme="light"] .map-star{opacity:0!important}
    [data-theme="light"] .map-sun{display:inline!important}
    .section-page{min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:calc(52px + 1rem) 1rem 1rem;position:relative;scroll-snap-align:start;box-sizing:border-box}
    .section-page>.sw{margin-top:auto;margin-bottom:auto}

    /* ===== INTRO PAGE (buffer) ===== */
    .section-intro-page{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:80px 2rem 40px;scroll-snap-align:start;position:relative;box-sizing:border-box}
    .section-intro-page .section-welcome{font-size:2.4rem;margin-bottom:1.2rem}
    .section-intro-page .section-desc{font-size:1.08rem;max-width:520px;margin:0 auto;line-height:2.2}
    .scroll-hint{position:absolute;bottom:2.5rem;left:50%;transform:translateX(-50%);text-align:center;opacity:.35;padding:1.5rem 3rem;cursor:pointer;-webkit-tap-highlight-color:transparent}
    .scroll-hint-text{font-size:.7rem;color:var(--muted);margin-bottom:.3rem}
    .scroll-hint-arrow{font-size:1.2rem;color:var(--muted);animation:scrollBounce 1.6s ease-in-out infinite}
    @keyframes scrollBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(6px)}}

    .section-intro{text-align:center;margin-bottom:1.8rem;position:relative;z-index:1}
    .section-welcome{font-size:1.6rem;font-weight:800;color:var(--accent);margin-bottom:.6rem}
    .section-desc{font-size:.88rem;color:var(--muted);line-height:1.9}

    .section-frame{border:1px solid var(--frame-border);border-radius:var(--radius);background:var(--bg2);overflow:visible;padding:1rem;width:100%;max-width:1100px;position:relative;z-index:1;transition:background .35s,border-color .35s;box-sizing:border-box}
    .section-page[data-map-id="interest"] .section-frame{background:rgba(22,30,48,.65);backdrop-filter:blur(8px)}
    .section-page[data-map-id="skills"] .section-frame{background:rgba(22,30,48,.92);backdrop-filter:blur(4px)}
    [data-theme="light"] .section-page[data-map-id="interest"] .section-frame{background:rgba(255,255,255,.6)}
    [data-theme="light"] .section-page[data-map-id="skills"] .section-frame{background:rgba(255,255,255,.88)}
    .section-header{text-align:center;margin-bottom:.75rem}
    .section-title{font-size:1.25rem;font-weight:700;color:var(--primary);margin-bottom:.3rem}
    .section-rules{font-size:.78rem;color:var(--muted);opacity:.6}

    .section-divider{height:8vh;min-height:40px;flex-shrink:0}

    /* ===== HERO ===== */
    #hero{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(ellipse at 50% 30%,var(--hero-grad1),var(--hero-grad2) 70%);overflow:hidden;padding-top:52px;position:relative}
    #hero-kw{position:absolute;inset:0}
    .hkw{position:absolute;color:var(--hkw-color);font-weight:700;white-space:nowrap;animation:kwf 6s ease-in-out infinite;pointer-events:auto;cursor:pointer;transition:color .25s,text-shadow .25s;user-select:none;z-index:5;padding:10px 14px;border-radius:6px}
    .hkw:hover{color:var(--hkw-hover);text-shadow:0 0 20px rgba(251,191,36,.2);z-index:100;background:rgba(251,191,36,.06)}
    @keyframes kwf{0%{transform:translateY(4px)}50%{transform:translateY(-6px)}100%{transform:translateY(4px)}}
    #hero-c{position:relative;z-index:1;text-align:center;pointer-events:none}
    #hero-c h1{font-size:clamp(2rem,5vw,3.2rem);font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hero-sub-hint{color:var(--muted);font-size:.7rem;margin-top:.8rem;opacity:.45;letter-spacing:.5px}
    .hero-overlay{position:fixed;inset:0;z-index:100;background:var(--overlay-bg);backdrop-filter:blur(14px);display:none;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s}
    .hero-overlay.show{display:flex;opacity:1;pointer-events:auto}
    .hero-ov-content{text-align:center;max-width:500px;padding:2.5rem;cursor:pointer}
    .hero-ov-word{font-size:2.2rem;font-weight:800;color:var(--accent);margin-bottom:1rem}
    .hero-ov-desc{font-size:1.05rem;color:var(--muted);line-height:2}
    .hero-ov-dismiss{margin-top:1.5rem;font-size:.75rem;color:var(--muted);opacity:.3}

    /* ===== CARD GAME ===== */
    .interest-s{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem 0 1rem;width:100%}
    .game-board{display:grid;grid-template-columns:repeat(5,1fr);gap:clamp(3px,0.8vh,6px);width:100%;max-width:min(500px,80vw);margin:0 auto}
    .card{width:100%;aspect-ratio:4/5;perspective:600px;position:relative;cursor:pointer;-webkit-tap-highlight-color:transparent;z-index:1;max-height:clamp(48px,12vh,110px)}
    .card-inner{position:relative;width:100%;height:100%;text-align:center;transition:transform .5s;transform-style:preserve-3d;pointer-events:none}
    .card.flipped .card-inner,.card.matched .card-inner{transform:rotateY(180deg)}
    .card.matched .card-inner{box-shadow:none}
    .card-front,.card-back{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;font-weight:600;padding:6px;pointer-events:none}
    .card-front{color:#fff;transform:rotateY(180deg);justify-content:space-between;padding:clamp(3px,1vh,8px) clamp(3px,0.6vh,6px)}
    .cname{font-size:clamp(6px,1.2vh,10px);opacity:.85}.clogo{width:clamp(16px,3.5vh,32px);height:clamp(16px,3.5vh,32px);fill:currentColor;color:rgba(255,255,255,.9)}.clogo svg{width:100%;height:100%}
    .iname{font-size:clamp(7px,1.4vh,12px);font-weight:700}
    .card-back{background:var(--card-back-bg);border:1.5px solid var(--card-back-border);color:var(--muted);transition:background .35s,border-color .35s}
    .card-back::after{content:'?';font-size:clamp(.8rem,2vh,1.6rem);opacity:.4}
    .gstatus{margin-top:clamp(.3rem,1vh,.8rem);font-size:clamp(.7rem,1.2vh,.85rem);color:var(--muted);font-weight:500}
    .shuffle-link{color:var(--accent);text-decoration:underline;cursor:pointer;font-weight:700;text-underline-offset:2px}
    .shuffle-link:hover{color:var(--gold);text-decoration-style:wavy}

    /* ===== CAREER ===== */
    .career-wrap{display:flex;min-height:min(380px,55vh);border-radius:var(--radius);overflow:hidden;position:relative}
    .career-pane{flex:1;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1.5rem .8rem;min-height:0}
    .career-pane:first-child{border-right:1px solid var(--frame-border)}
    #cl,#cr{background:var(--bg2)}
    .mbag-area{position:relative;width:170px;height:260px;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .mbag-svg{width:140px;height:180px;transition:transform .7s cubic-bezier(.175,.885,.32,1.275);flex-shrink:0;transform-origin:center center;cursor:pointer}
    .mbag-area.open .mbag-svg{transform:scaleY(-1) translateY(-10px)}
    .coins-row{display:flex;gap:8px;margin-top:8px;opacity:0;transform:translateY(-18px);transition:all .6s cubic-bezier(.34,1.56,.64,1)}
    .mbag-area.open .coins-row{opacity:1;transform:translateY(0)}
    .gcoin{width:44px;height:44px;border-radius:50%;background:radial-gradient(circle at 35% 30%,#fef3c7,#fbbf24 45%,#b45309 100%);border:2.5px solid #92400e;display:flex;justify-content:center;align-items:center;font-weight:800;color:#451a03;font-size:9px;cursor:pointer;box-shadow:0 3px 10px rgba(0,0,0,.4),inset 0 -2px 5px rgba(0,0,0,.25),inset 0 2px 5px rgba(255,255,255,.35);position:relative;transition:transform .2s;opacity:0;transform:scale(0)}
    .gcoin::after{content:'';position:absolute;inset:3px;border-radius:50%;border:1.5px solid rgba(120,53,15,.25)}
    .mbag-area.open .gcoin{opacity:1;transform:scale(1)}
    .mbag-area.open .gcoin:nth-child(1){transition-delay:.15s}.mbag-area.open .gcoin:nth-child(2){transition-delay:.25s}.mbag-area.open .gcoin:nth-child(3){transition-delay:.35s}.mbag-area.open .gcoin:nth-child(4){transition-delay:.45s}
    .gcoin:hover{transform:scale(1.12)!important}
    .egg-area{position:relative;width:170px;height:260px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .egg-wrap{position:relative;width:110px;height:145px}
    .egg-top-half{position:absolute;width:100%;height:55%;top:0;clip-path:inset(0 0 45% 0);transition:all .8s cubic-bezier(.68,-.55,.265,1.55);z-index:3}
    .egg-bottom-half{position:absolute;width:100%;height:100%;top:0;z-index:1}
    .egg-area.cracked .egg-top-half{transform:translateY(-50px) rotate(-15deg);opacity:0}
    .egg-crack-line{position:absolute;top:46%;left:5%;right:5%;height:8%;z-index:4;opacity:0;transition:opacity .3s}
    .egg-area:not(.cracked):hover .egg-crack-line{opacity:.7}
    .egg-area.cracked .egg-crack-line{opacity:0}
    .cloud-reveal{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);z-index:5;transition:transform .9s cubic-bezier(.34,1.56,.64,1) .3s;cursor:pointer}
    .egg-area.cracked .cloud-reveal{transform:translate(-50%,-50%) scale(1)}
    .career-overlay{position:absolute;inset:0;background:var(--overlay-bg);backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:center;z-index:50;opacity:0;pointer-events:none;transition:opacity .35s;border-radius:var(--radius)}
    .career-overlay.show{opacity:1;pointer-events:auto}
    .career-overlay-text{font-size:2rem;font-weight:800;color:var(--primary);text-shadow:0 0 40px rgba(56,189,248,.15)}
    .career-overlay-sub{font-size:.8rem;color:var(--muted);margin-top:.4rem}

    /* ===== BUBBLES ===== */
    .kspores{position:relative;height:min(460px,60vh);background:linear-gradient(160deg,var(--sp-bg1),var(--sp-bg2) 50%,var(--sp-bg1));border-radius:var(--radius);overflow:hidden;transition:background .35s}
    .sp-hint{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:var(--muted);font-size:1rem;pointer-events:none;z-index:2;opacity:0;transition:opacity 1s}
    .sp-hint.vis{opacity:1}.sp-hint.fade{opacity:0;transition:opacity 1.5s}
    .sp-canvas{position:absolute;inset:0;pointer-events:none;z-index:1}
    .sp-area{position:absolute;inset:0;z-index:3}
    .sp-bub{position:absolute;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;text-align:center;font-size:12px;font-weight:600;color:var(--bub-text);text-shadow:0 1px 3px var(--bub-shadow);pointer-events:auto;transition:transform .15s;user-select:none;overflow:visible}
    .sp-bub::before{content:'';position:absolute;top:-18%;left:-18%;width:136%;height:136%;border-radius:50%;pointer-events:auto}
    .sp-bub:hover{transform:scale(1.08)}
    .sp-ov{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:var(--sp-ov-bg);opacity:0;pointer-events:none;z-index:10;transition:opacity .4s;backdrop-filter:blur(6px)}
    .sp-ov.vis{opacity:1;pointer-events:auto}
    .sp-ov-box{max-width:400px;padding:1.8rem 2rem;background:var(--sp-ov-box);border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.3);text-align:center;border:1px solid var(--frame-border);transition:background .35s,border-color .35s}
    .sp-ov-term{font-size:1.2rem;font-weight:700;margin-bottom:.5rem;color:var(--primary)}
    .sp-ov-desc{font-size:.88rem;line-height:1.8;color:var(--muted)}

    /* ===== LEAFLET MAP ===== */
    .map-inner-frame{border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
    #leafletMap{height:min(400px,calc(100vh - 340px));min-height:220px;flex-shrink:1}
    .leaflet-popup-content img{display:block;width:100%;border-radius:6px}
    .map-footer{padding:.3rem 1rem 0;background:var(--bg2);display:flex;flex-direction:column;align-items:center;gap:.1rem;transition:background .35s}
    .map-legend{display:flex;flex-wrap:wrap;gap:.8rem;align-items:center;justify-content:center}
    .map-legend-btn{display:flex;align-items:center;gap:.4rem;padding:.3rem .6rem;border-radius:8px;cursor:pointer;border:1px solid transparent;transition:all .2s;font-size:.75rem;color:var(--muted)}
    .map-legend-btn:hover,.map-legend-btn.active{border-color:var(--frame-border);background:var(--toggle-bg);color:var(--primary)}
    .map-legend-btn span{font-weight:600;margin-right:.3rem}
    .ml-scale{display:flex;gap:.15rem;align-items:center}
    .ml-dot{width:9px;height:9px;border-radius:2px;flex-shrink:0;display:inline-block}
    .ml-scale small{font-size:.65rem;color:var(--muted);margin-right:.4rem}
    .ml-scale small:last-child{margin-right:0}
    .map-instr{text-align:center;padding:.1rem 0 0;font-size:.7rem;color:var(--muted);opacity:.45;margin-bottom:0}

    /* ===== TIMELINE ===== */
    .tl-wrap{position:relative;padding:.8rem 0 .8rem 2.5rem;max-height:52vh;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--frame-border) transparent}
    .tl-wrap::-webkit-scrollbar{width:4px}
    .tl-wrap::-webkit-scrollbar-thumb{background:var(--frame-border);border-radius:4px}
    .tl-line{position:absolute;left:12px;top:0;bottom:0;width:2px;background:var(--tl-line);transition:background .35s}
    .tl-item{position:relative;padding-bottom:1.5rem}
    .tl-dot{position:absolute;left:-2.5rem;top:.35rem;width:14px;height:14px;border-radius:50%;border:2.5px solid;background:var(--bg);transition:background .35s}
    .tl-time{font-size:.78rem;color:var(--muted)}.tl-title{font-size:.9rem;font-weight:600;color:var(--primary);margin-top:.12rem}.tl-desc{font-size:.8rem;color:var(--muted);margin-top:.08rem}
    .tl-edu .tl-dot{border-color:#3b82f6}.tl-work .tl-dot{border-color:#ef4444}.tl-proj .tl-dot{border-color:#22c55e}.tl-culture .tl-dot{border-color:#f59e0b}.tl-honor .tl-dot{border-color:#a855f7}
    .tl-legend{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.3rem;justify-content:center}
    .tl-legend-item{display:flex;align-items:center;gap:.3rem;font-size:.75rem;color:var(--muted);cursor:pointer;transition:all .2s;user-select:none;padding:.35rem .7rem;border-radius:8px;border:1.5px solid transparent}
    .tl-legend-item:hover{border-color:var(--accent);color:var(--primary);background:rgba(56,189,248,.04)}
    .tl-legend-item.tl-hidden{opacity:.3;border-color:transparent;background:none}
    .tl-legend-item.tl-active{opacity:1;border-color:var(--accent);color:var(--primary);background:rgba(56,189,248,.08);font-weight:700}
    .tl-legend-dot{width:9px;height:9px;border-radius:50%}
    .tl-legend-hint{text-align:center;font-size:.68rem;color:var(--muted);opacity:.35;margin-bottom:.6rem}

    /* ===== SKILL TREE ===== */
    .skill-tree-wrap{display:flex;flex-direction:column;align-items:center;padding:.5rem 0;overflow:hidden;max-height:calc(100vh - 200px)}
    .tree-svg{max-width:700px;width:100%}
    .skill-tree-wrap .leaf-blob{will-change:transform,opacity}
    .skill-tree-wrap .tree-apple{will-change:opacity,transform}
    .skill-tree-wrap .apple-tip{font-family:Inter,'Noto Sans SC',sans-serif}
    .skill-tree-wrap .cluster-label{will-change:opacity;font-family:Inter,'Noto Sans SC',sans-serif}
    [data-theme="light"] .skill-tree-wrap .tree-apple{filter:brightness(1.05);border-color:rgba(0,0,0,.1)!important}
    [data-theme="light"] .skill-tree-wrap .leaf-blob{background:#7BC67B!important;opacity:.55!important}
    [data-theme="light"] .skill-tree-wrap .cluster-label{text-shadow:0 1px 4px rgba(255,255,255,.8)!important}
    [data-theme="light"] .tree-svg path[fill="#5c3a1e"]{fill:#8B6D4F}
    [data-theme="light"] .tree-svg path[stroke="#5c3a1e"]{stroke:#8B6D4F}
    

    /* ===== CONTACT ===== */
    .contact-list{list-style:none;margin-top:.6rem}
    .contact-list li{padding:.4rem 0;font-size:.88rem;color:var(--muted);display:flex;align-items:center;gap:.5rem}
    .contact-icon{width:16px;height:16px;flex-shrink:0;color:var(--accent);opacity:.7}
    .contact-label{min-width:3.5em;font-weight:600;flex-shrink:0}
    .contact-sep{margin:0 .3rem;opacity:.4}
    .contact-list a{color:var(--accent);text-decoration:none;border-bottom:1px solid rgba(56,189,248,.2);transition:all .2s}
    .contact-list a:hover{color:var(--primary);border-color:var(--accent)}

    /* ===== COMPLETION OVERLAY ===== */
    .completion-overlay{position:fixed;inset:0;z-index:2400;background:var(--overlay-bg);backdrop-filter:blur(20px);display:none;align-items:center;justify-content:center;flex-direction:column;opacity:0;pointer-events:none;transition:opacity .5s;cursor:pointer;text-align:center;padding:2rem}
    .completion-overlay.show{display:flex;opacity:1;pointer-events:auto}
    .completion-overlay h2{font-size:1.8rem;color:var(--gold);font-weight:700;margin-bottom:1.2rem;animation:unlockPulse .6s ease both}
    .completion-overlay p{font-size:1rem;color:var(--muted);line-height:2.2}
    .completion-overlay .unlock-dismiss{margin-top:2rem;font-size:.75rem;color:var(--muted);opacity:.3}

    /* ===== ENDING + REPLAY ===== */
    .ending-section{text-align:center;padding:3rem 1.5rem;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.2rem;scroll-snap-align:start;position:relative;z-index:100}
    .ending-btns{display:flex;flex-direction:column;gap:1.2rem;align-items:center;margin-top:1rem;position:relative;z-index:200}
    .quote-trigger,.replay-btn{padding:.7rem 2rem;border:1.5px solid var(--frame-border);border-radius:999px;background:var(--toggle-bg);color:var(--muted);font-size:.88rem;font-weight:600;cursor:pointer;transition:all .3s;letter-spacing:.5px;position:relative;z-index:200;-webkit-tap-highlight-color:transparent}
    .quote-trigger:hover,.replay-btn:hover{color:var(--accent);border-color:var(--accent);background:rgba(56,189,248,.06)}

    /* ===== QUOTE OVERLAY ===== */
    .quote-overlay{position:fixed;inset:0;z-index:2600;background:var(--overlay-bg);backdrop-filter:blur(20px);display:none;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s;cursor:pointer}
    .quote-overlay.show{display:flex;opacity:1;pointer-events:auto}
    .quote-ov-content{text-align:center;max-width:560px;padding:3rem 2rem;pointer-events:auto;cursor:default;position:relative;z-index:1;border-radius:var(--radius)}
    .quote-ov-close{position:absolute;top:.5rem;right:.8rem;font-size:1.6rem;color:var(--muted);cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s;opacity:.5;z-index:3}
    .quote-ov-close:hover{opacity:1;color:var(--accent)}
    .quote-ov-text{font-size:1.4rem;font-weight:600;color:var(--primary);line-height:2.2;min-height:3rem;transition:opacity .3s}
    .quote-ov-controls{display:flex;gap:1rem;justify-content:center;margin-top:2rem;position:relative;z-index:2}
    .quote-ov-btn{padding:.5rem 1.5rem;border:1px solid var(--frame-border);border-radius:999px;background:var(--toggle-bg);color:var(--muted);font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;position:relative;z-index:2;-webkit-tap-highlight-color:transparent}
    .quote-ov-btn:hover{color:var(--accent);border-color:var(--accent)}
    .quote-ov-dismiss{margin-top:1.8rem;font-size:.72rem;color:var(--muted);opacity:.3;cursor:pointer}

    /* ===== MAP OVERLAYS ===== */
    .map-overlay{position:fixed;inset:0;z-index:2000;background:var(--overlay-bg2);backdrop-filter:blur(16px);display:none;flex-direction:column;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .4s;overflow:auto;-webkit-overflow-scrolling:touch}
    .map-overlay.open{display:flex;opacity:1;pointer-events:auto}
    .map-close{position:fixed;top:20px;right:28px;font-size:2rem;color:var(--muted);cursor:pointer;z-index:2010;width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--toggle-bg);transition:all .2s}
    .map-close:hover{color:var(--primary)}
    .map-overlay-title{color:var(--gold);font-size:.8rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;margin-bottom:1rem;font-family:Inter,sans-serif;opacity:.7}
    .map-svg-wrap{width:92%;max-width:1200px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch}
    .illustrated-map{width:100%;min-width:700px;height:auto}
    .map-building{cursor:pointer;transition:transform .2s,filter .2s,opacity .3s;transform-origin:center bottom;opacity:.2}
    .map-building.unlocked{opacity:1}
    .map-building:hover{transform:translateY(-5px);filter:drop-shadow(0 8px 16px rgba(251,191,36,.15))}
    .map-building.unlocked:hover{filter:drop-shadow(0 8px 16px rgba(251,191,36,.25))}
    .map-building text{pointer-events:none}
    .map-label{font-size:12px;fill:var(--primary);font-weight:700;text-anchor:middle}
    .mini-bld{opacity:.2;transition:opacity .3s,filter .3s}
    .mini-bld.unlocked{opacity:1}
    .mini-bld.active{filter:drop-shadow(0 0 3px rgba(56,189,248,.7))}
    /* Light mode overrides */
    [data-theme="light"] .illustrated-map{filter:brightness(1.15) saturate(.8) contrast(.95)}
    [data-theme="light"] #map-btn svg{filter:brightness(1.15) saturate(.8) contrast(.95)}
    [data-theme="light"] .mbag-svg path[fill="url(#bg1)"]{filter:brightness(1.3) saturate(.7)}
    [data-theme="light"] .cloud-reveal svg{filter:brightness(1.1) saturate(.7)}
    /* Light mode card colors — bright & cute pastels */
    [data-theme="light"] .card-front[style*="#9333ea"]{background:#c4a8d8!important}
    [data-theme="light"] .card-front[style*="#16a34a"]{background:#8ec5a0!important}
    [data-theme="light"] .card-front[style*="#0284c7"]{background:#89bdd3!important}
    [data-theme="light"] .card-front[style*="#ea580c"]{background:#e0b08a!important}
    [data-theme="light"] .card-front[style*="#c4a8d8"]{background:#c4a8d8!important}
    [data-theme="light"] .card-front[style*="#8ec5a0"]{background:#8ec5a0!important}
    [data-theme="light"] .card-front[style*="#89bdd3"]{background:#89bdd3!important}
    [data-theme="light"] .card-front[style*="#e0b08a"]{background:#e0b08a!important}
    /* Light mode career — no black strokes */
    [data-theme="light"] .mbag-svg path{stroke:#c5a24e!important}
    [data-theme="light"] .mbag-svg ellipse[stroke]{stroke:#c5a24e!important}
    [data-theme="light"] .gcoin{border-color:#c9943a!important;box-shadow:0 3px 10px rgba(0,0,0,.12),inset 0 -2px 5px rgba(0,0,0,.08),inset 0 2px 5px rgba(255,255,255,.4)!important}
    [data-theme="light"] .gcoin::after{border-color:rgba(160,120,40,.15)!important}
    [data-theme="light"] .egg-crack-line path{stroke:#a0845a!important}
    [data-theme="light"] .egg-bottom-half,[data-theme="light"] .egg-top-half{filter:brightness(1.08) saturate(.85)}

    #map-btn{position:fixed;bottom:16px;right:20px;z-index:1000;cursor:pointer;border-radius:10px;overflow:hidden;border:2px solid var(--map-btn-border);box-shadow:0 4px 20px rgba(0,0,0,.2);transition:all .3s;background:var(--map-btn-bg)}
    #map-btn:hover{transform:scale(1.08);box-shadow:0 6px 28px rgba(0,0,0,.3);border-color:var(--accent)}
    #map-btn svg{display:block}

    .unlock-overlay{position:fixed;inset:0;z-index:2500;background:var(--overlay-bg2);backdrop-filter:blur(20px);display:none;align-items:center;justify-content:center;flex-direction:column;opacity:0;pointer-events:none;transition:opacity .5s;cursor:pointer}
    .unlock-overlay.show{display:flex;opacity:1;pointer-events:auto}
    .unlock-congrats{font-size:.9rem;color:var(--muted);margin-bottom:.8rem;letter-spacing:2px}
    .unlock-scene{font-size:1.8rem;font-weight:800;color:var(--gold);animation:unlockPulse .6s ease both}
    .unlock-dismiss{margin-top:2rem;font-size:.75rem;color:var(--muted);opacity:.3}
    @keyframes unlockPulse{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}

    @media(max-width:768px){
      .nav{gap:1.6rem;padding:0 6rem 0 .5rem}
      .nav a .nav-label{display:none}
      .nav a .nav-icon{width:20px;height:20px}
      .nav a::after{display:block}
    }
    @media(max-width:600px){
      .nav{gap:1.1rem;padding:0 5.5rem 0 .5rem;height:46px;overflow:visible;justify-content:center}
      .nav a{font-size:.68rem;flex-shrink:0}
      .nav a .nav-icon{width:18px;height:18px}
      .toggle-group{top:10px;right:10px;gap:5px}
      .lang-toggle,.theme-toggle{width:28px;height:28px;font-size:.58rem}
      .theme-toggle svg{width:12px;height:12px}
      .section-page{padding:calc(46px + .5rem) .5rem .5rem}
      .section-frame{padding:.75rem}
      .section-intro-page{padding:62px 1.5rem 30px}
      .section-intro-page .section-welcome{font-size:1.6rem}
      .section-intro-page .section-desc{font-size:.92rem}
      .section-welcome{font-size:1.3rem}
      .game-board{grid-template-columns:repeat(5,1fr);gap:clamp(2px,0.6vh,4px);margin:0 auto;max-width:min(320px,85vw)}
      .card{aspect-ratio:4/5;max-height:clamp(40px,11vh,90px)}.clogo{width:clamp(14px,3vh,18px);height:clamp(14px,3vh,18px)}.iname{font-size:clamp(6px,1.2vh,8px)}.cname{font-size:clamp(5px,1vh,7px)}
      .career-wrap{flex-direction:column;min-height:auto}
      .career-pane:first-child{border-right:none;border-bottom:1px solid var(--frame-border)}
      .map-svg-wrap{width:100%;padding:0 .5rem}
      .illustrated-map{min-width:600px}
      .kspores{height:min(360px,55vh)}
      #leafletMap{height:min(300px,calc(100vh - 320px));min-height:180px}
      .section-divider{height:4vh;min-height:20px}
      .map-legend{flex-direction:column;gap:.4rem}
    }
  </style>
</head>
<body>

<nav class="nav">
  <a href="#hero" data-tooltip="关于" data-tooltip-key="nav-hero"><span class="nav-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M4 21v-1a6 6 0 0 1 12 0v1"/></svg></span><span class="nav-label" data-i18n="nav-hero">关于</span></a>
  <a href="#interest" data-tooltip="兴趣" data-tooltip-key="nav-interest"><span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></span><span class="nav-label" data-i18n="nav-interest">兴趣</span></a>
  <a href="#career" data-tooltip="工作" data-tooltip-key="nav-career"><span class="nav-icon"><svg viewBox="0 0 24 24"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/></svg></span><span class="nav-label" data-i18n="nav-career">工作</span></a>
  <a href="#study" data-tooltip="学习" data-tooltip-key="nav-study"><span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></span><span class="nav-label" data-i18n="nav-study">学习</span></a>
  <a href="#worldmap" data-tooltip="足迹" data-tooltip-key="nav-worldmap"><span class="nav-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><ellipse cx="12" cy="12" rx="4" ry="10"/></svg></span><span class="nav-label" data-i18n="nav-worldmap">足迹</span></a>
  <a href="#timelines" data-tooltip="经历" data-tooltip-key="nav-timelines"><span class="nav-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></span><span class="nav-label" data-i18n="nav-timelines">经历</span></a>
  <a href="#skills" data-tooltip="技能" data-tooltip-key="nav-skills"><span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M12 22v-8"/><path d="M8 22c0-5 4-8 4-14 0 6 4 9 4 14"/><circle cx="7" cy="8" r="3"/><circle cx="17" cy="6" r="2.5"/><circle cx="12" cy="4" r="3"/></svg></span><span class="nav-label" data-i18n="nav-skills">技能</span></a>
  <a href="#takeaway" data-tooltip="联系" data-tooltip-key="nav-takeaway"><span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22 6 12 13 2 6"/></svg></span><span class="nav-label" data-i18n="nav-takeaway">联系</span></a>
</nav>
<div class="toggle-group">
  <div class="lang-toggle" id="langToggle">EN</div>
  <div class="theme-toggle" id="themeToggle" title="Toggle theme">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
  </div>
</div>

<!-- ═══════════ HERO ═══════════ -->
<div class="section-page" id="hero" data-map-id="hero">
  <div id="hero-kw"></div>
  <div id="hero-c">
    <h1>Who am I?</h1>
    <p class="hero-sub-hint" data-i18n="hero-hint">点击关键词了解更多</p>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<div id="heroOverlay" class="hero-overlay">
  <div class="hero-ov-content">
    <div class="hero-ov-word" id="heroOvWord"></div>
    <div class="hero-ov-desc" id="heroOvDesc"></div>
    <div class="hero-ov-dismiss" data-i18n="dismiss-click">点击任意处关闭</div>
  </div>
</div>

<div class="section-divider" data-next-id="interest" data-next-label="兴趣游乐场"></div>

<!-- ═══════════ 兴趣游乐场 — INTRO ═══════════ -->
<div class="section-intro-page" id="interest" data-map-id="interest">
  <div class="sw">
    <div class="section-welcome" data-i18n="interest-welcome">欢迎来到兴趣游乐场</div>
    <div class="section-desc" data-i18n-html="interest-desc">了解一个人，从TA的兴趣开始<br>翻翻卡片，看看小对藏了哪些宝藏爱好</div>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<!-- 兴趣游乐场 — CONTENT -->
<div class="section-page" data-map-id="interest">
  <div class="sw">
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="interest-title">兴趣对对碰</div>
        <div class="section-rules">翻开两张同类卡片即可配对，点击「<a class="shuffle-link" href="#">打乱重来</a>」可重新开始</div>
      </div>
      <div class="interest-s">
        <div class="game-board" id="gameBoard"></div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="career" data-next-label="事业大楼"></div>

<!-- ═══════════ 事业大楼 — INTRO ═══════════ -->
<div class="section-intro-page" id="career" data-map-id="career">
  <div class="sw">
    <div class="section-welcome" data-i18n="career-welcome">欢迎来到事业大楼</div>
    <div class="section-desc" data-i18n-html="career-desc">小对的职业版图就藏在这里<br>来一探究竟吧</div>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<!-- 事业大楼 — CONTENT -->
<div class="section-page" data-map-id="career">
  <div class="sw">
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="career-title">我的经历：金融 × 初创</div>
        <div class="section-rules" data-i18n="career-rules">点击左边的钱袋和右边的鸡蛋，探索小对的事业版图</div>
      </div>
      <div class="career-wrap" id="careerWrap">
        <div class="career-pane" id="cl">
          <div class="mbag-area" id="mbag">
            <svg class="mbag-svg" viewBox="0 0 160 200" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="bg1" x1="0" y1="0" x2=".3" y2="1"><stop offset="0%" stop-color="#d4a017"/><stop offset="50%" stop-color="#b8860b"/><stop offset="100%" stop-color="#8b6914"/></linearGradient>
                <radialGradient id="bs1" cx=".35" cy=".3"><stop offset="0%" stop-color="rgba(255,255,255,.3)"/><stop offset="100%" stop-color="transparent"/></radialGradient>
                <linearGradient id="rope" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#a0522d"/><stop offset="100%" stop-color="#6b3a1f"/></linearGradient>
              </defs>
              <ellipse cx="80" cy="192" rx="55" ry="6" fill="rgba(0,0,0,.3)"/>
              <path d="M32,52 C8,75 8,140 16,165 C24,185 55,195 80,195 C105,195 136,185 144,165 C152,140 152,75 128,52 Z" fill="url(#bg1)" stroke="#6b3a1f" stroke-width="1"/>
              <path d="M32,52 C8,75 8,140 16,165 C24,185 55,195 80,195 C105,195 136,185 144,165 C152,140 152,75 128,52 Z" fill="url(#bs1)"/>
              <path d="M45,52 Q45,38 55,30 L105,30 Q115,38 115,52 Z" fill="url(#bg1)" stroke="#6b3a1f" stroke-width="1"/>
              <ellipse cx="80" cy="52" rx="38" ry="6" fill="none" stroke="url(#rope)" stroke-width="4"/>
              <text x="80" y="140" text-anchor="middle" font-size="52" fill="#6b3a1f" font-weight="900" font-family="Georgia,serif" opacity=".4">$</text>
            </svg>
            <div class="coins-row">
              <div class="gcoin" data-co="期货" data-i18n="coin-1">期货</div>
              <div class="gcoin" data-co="律所IPO" data-i18n="coin-2">律所</div>
              <div class="gcoin" data-co="私募" data-i18n="coin-3">私募</div>
              <div class="gcoin" data-co="券商投行" data-i18n="coin-4">投行</div>
            </div>
          </div>
        </div>
        <div class="career-pane" id="cr">
          <div class="egg-area" id="eggArea">
            <div class="egg-wrap">
              <svg class="egg-bottom-half" viewBox="0 0 130 170"><defs><radialGradient id="eg1" cx=".45" cy=".45"><stop offset="0%" stop-color="#faf5eb"/><stop offset="50%" stop-color="#ede0cc"/><stop offset="100%" stop-color="#c4a77d"/></radialGradient></defs><ellipse cx="65" cy="92" rx="55" ry="72" fill="url(#eg1)"/><ellipse cx="50" cy="62" rx="16" ry="22" fill="rgba(255,255,255,.15)" transform="rotate(-15 50 62)"/></svg>
              <svg class="egg-top-half" viewBox="0 0 130 170"><defs><radialGradient id="eg2" cx=".45" cy=".45"><stop offset="0%" stop-color="#faf5eb"/><stop offset="50%" stop-color="#ede0cc"/><stop offset="100%" stop-color="#c4a77d"/></radialGradient></defs><ellipse cx="65" cy="92" rx="55" ry="72" fill="url(#eg2)"/><ellipse cx="50" cy="62" rx="16" ry="22" fill="rgba(255,255,255,.18)" transform="rotate(-15 50 62)"/></svg>
              <svg class="egg-crack-line" viewBox="0 0 120 12"><path d="M0,6 L12,2 L22,10 L35,1 L48,11 L58,3 L72,10 L82,2 L95,9 L105,3 L120,6" fill="none" stroke="#654321" stroke-width="3" stroke-linecap="round"/></svg>
            </div>
            <div class="cloud-reveal" id="cloudReveal">
              <svg width="130" height="88" viewBox="0 0 140 95"><defs><radialGradient id="cg1" cx=".4" cy=".3"><stop offset="0%" stop-color="#f0f4ff"/><stop offset="100%" stop-color="#c7d2fe"/></radialGradient><radialGradient id="cg2" cx=".5" cy=".4"><stop offset="0%" stop-color="#e0e7ff"/><stop offset="100%" stop-color="#a5b4fc"/></radialGradient><filter id="cshadow"><feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity=".15"/></filter></defs><g filter="url(#cshadow)"><ellipse cx="70" cy="58" rx="55" ry="25" fill="url(#cg1)"/><circle cx="42" cy="40" r="25" fill="url(#cg1)"/><circle cx="75" cy="33" r="28" fill="url(#cg2)"/><circle cx="100" cy="45" r="20" fill="url(#cg1)"/></g><text x="70" y="63" text-anchor="middle" font-size="13" fill="#4338ca" font-weight="700" data-i18n="cloud-text">沄视科技</text></svg>
            </div>
          </div>
        </div>
        <div class="career-overlay" id="careerOv">
          <div style="text-align:center;cursor:pointer"><div class="career-overlay-text" id="careerOvText"></div><div class="career-overlay-sub" data-i18n="dismiss-click">点击任意处关闭</div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="study" data-next-label="知识湖"></div>

<!-- ═══════════ 知识湖 — INTRO ═══════════ -->
<div class="section-intro-page" id="study" data-map-id="study">
  <div class="sw">
    <div class="section-welcome" data-i18n="study-welcome">欢迎来到知识湖</div>
    <div class="section-desc" data-i18n-html="study-desc">知识湖里漂浮着许多泡泡<br>戳开一个，学习一个新词汇吧</div>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<!-- 知识湖 — CONTENT -->
<div class="section-page" data-map-id="study">
  <div class="sw">
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="study-title">知识泡泡</div>
        <div class="section-rules" data-i18n="study-rules">湖里的泡泡装着各种知识——戳开它，随机学一个新词汇</div>
      </div>
      <div class="kspores" id="kSpores">
        <div class="sp-hint" id="spHint" data-i18n="bubble-hint">戳开泡泡试试看</div>
        <canvas class="sp-canvas" id="spCanvas"></canvas>
        <div class="sp-area" id="spArea"></div>
        <div class="sp-ov" id="spOv">
          <div class="sp-ov-box"><div class="sp-ov-term" id="spOvTerm"></div><div class="sp-ov-desc" id="spOvDesc"></div></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="worldmap" data-next-label="故事杂货铺"></div>

<!-- ═══════════ 故事杂货铺 — INTRO ═══════════ -->
<div class="section-intro-page" id="worldmap" data-map-id="worldmap">
  <div class="sw">
    <div class="section-welcome" data-i18n="worldmap-welcome">欢迎来到故事杂货铺</div>
    <div class="section-desc" data-i18n-html="worldmap-desc">这里有一份世界地图<br>来看看小对的足迹和语言版图吧</div>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<!-- 故事杂货铺 — CONTENT -->
<div class="section-page" data-map-id="worldmap">
  <div class="sw">
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="worldmap-title">我与世界</div>
      </div>
      <div class="map-inner-frame">
        <div id="leafletMap"></div>
        <div class="map-footer">
          <div class="map-legend">
            <div class="map-legend-btn active" data-mode="visit">
              <span data-i18n="map-visit">我去过这里</span>
              <div class="ml-scale">
                <span class="ml-dot" style="background:#bfdbfe"></span><small data-i18n="map-transit">途经</small>
                <span class="ml-dot" style="background:#93c5fd"></span><small data-i18n="map-travel">旅行</small>
                <span class="ml-dot" style="background:#3b82f6"></span><small data-i18n="map-short">短居</small>
                <span class="ml-dot" style="background:#1d4ed8"></span><small data-i18n="map-long">长住</small>
              </div>
            </div>
            <div class="map-legend-btn" data-mode="lang">
              <span data-i18n="map-lang">我会说这里的语言</span>
              <div class="ml-scale">
                <span class="ml-dot" style="background:#d8b4fe"></span><small data-i18n="map-beginner">入门</small>
                <span class="ml-dot" style="background:#a78bfa"></span><small data-i18n="map-proficient">熟练</small>
                <span class="ml-dot" style="background:#7c3aed"></span><small data-i18n="map-fluent">精通</small>
                <span class="ml-dot" style="background:#4c1d95"></span><small data-i18n="map-native">母语</small>
              </div>
            </div>
          </div>
          <div class="map-instr" data-i18n="map-instr">点击标记切换 · 滚轮缩放 · 拖拽平移</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="timelines" data-next-label="经历钟楼"></div>

<!-- ═══════════ 经历钟楼 — INTRO ═══════════ -->
<div class="section-intro-page" id="timelines" data-map-id="timelines">
  <div class="sw">
    <div class="section-welcome" data-i18n="timelines-welcome">欢迎来到经历钟楼</div>
    <div class="section-desc" data-i18n-html="timelines-desc">叮咚——<br>伴着钟声，回顾小对的经历时间轴</div>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<!-- 经历钟楼 — CONTENT -->
<div class="section-page" data-map-id="timelines">
  <div class="sw">
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="timelines-title">时间轴</div>
        <div class="section-rules" data-i18n="timelines-rules">学业、工作、项目、文化、荣誉都在这里啦，点击标签试试看</div>
      </div>
      <div class="tl-legend">
        <div class="tl-legend-item" data-type="edu"><div class="tl-legend-dot" style="background:#3b82f6"></div><span data-i18n="tl-edu">学业</span></div>
        <div class="tl-legend-item" data-type="work"><div class="tl-legend-dot" style="background:#ef4444"></div><span data-i18n="tl-work">工作</span></div>
        <div class="tl-legend-item" data-type="proj"><div class="tl-legend-dot" style="background:#22c55e"></div><span data-i18n="tl-proj">项目</span></div>
        <div class="tl-legend-item" data-type="culture"><div class="tl-legend-dot" style="background:#f59e0b"></div><span data-i18n="tl-culture">文化</span></div>
        <div class="tl-legend-item" data-type="honor"><div class="tl-legend-dot" style="background:#a855f7"></div><span data-i18n="tl-honor">荣誉</span></div>
      </div>
      <div class="tl-wrap" id="tlWrap"><div class="tl-line"></div></div>
    </div>
  </div>
</div>

<div class="section-divider" data-next-id="skills" data-next-label="技能花园"></div>

<!-- ═══════════ 技能花园 — INTRO ═══════════ -->
<div class="section-intro-page" id="skills" data-map-id="skills">
  <div class="sw">
    <div class="section-welcome" data-i18n="skills-welcome">欢迎来到技能花园</div>
    <div class="section-desc" data-i18n-html="skills-desc">每一片叶子都是一项技能<br>一起看看小对的技能全景图</div>
  </div>
  <div class="scroll-hint"><div class="scroll-hint-text" data-i18n="scroll-hint">向下滑动</div><div class="scroll-hint-arrow">&#8964;</div></div>
</div>
<!-- 技能花园 — CONTENT -->
<div class="section-page" data-map-id="skills">
  <div class="sw">
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="skills-title">个人技能树</div>
      </div>
      <div class="skill-tree-wrap" id="stWrap"></div>
    </div>
  </div>
</div>

<!-- ═══════════ COMPLETION OVERLAY ═══════════ -->
<div class="completion-overlay" id="completionOverlay">
  <h2 data-i18n="completion-title">恭喜你顺利通关！</h2>
  <p data-i18n="completion-p1">小对的小游戏到这里就结束啦</p>
  <p data-i18n="completion-p2">但小对和你的故事才刚刚开始</p>
  <p data-i18n="completion-p3">让我们一起继续探索吧</p>
  <p data-i18n="completion-p4">她一定会给你带来惊喜！</p>
  <div class="unlock-dismiss" data-i18n="unlock-dismiss">点击任意处继续</div>
</div>

<!-- ═══════════ 联系XD ═══════════ -->
<div class="section-page" id="takeaway" data-map-id="takeaway">
  <div class="sw">
    <div class="section-intro">
      <div class="section-welcome" data-i18n="takeaway-welcome">感谢你的探索</div>
      <div class="section-desc" data-i18n-html="takeaway-desc">还没看够？快来联系我！<br>线上沟通、线下 Coffee Chat 都很欢迎</div>
    </div>
    <div class="section-frame">
      <div class="section-header">
        <div class="section-title" data-i18n="takeaway-title">联系方式</div>
      </div>
      <div style="padding:.5rem 1rem">
        <ul class="contact-list">
          <li><svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.13.81.36 1.6.68 2.35a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.75.32 1.54.55 2.35.68A2 2 0 0 1 22 16.92z"/></svg><span class="contact-label" data-i18n="contact-tel">电话</span><span class="contact-sep">:</span><a href="tel:+8618091805045">+86 180-9180-5045</a></li>
          <li><svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg><span class="contact-label" data-i18n="contact-email">邮箱</span><span class="contact-sep">:</span><a href="mailto:xiaoduixd@gmail.com">xiaoduixd@gmail.com</a></li>
          <li><svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg><span class="contact-label" data-i18n="contact-wechat">微信</span><span class="contact-sep">:</span>Astrid_XD</li>
          <li><svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg><span class="contact-label" data-i18n="contact-red">小红书</span><span class="contact-sep">:</span>小对XD · 小对XD在路上</li>
          <li><svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg><span class="contact-label" data-i18n="contact-strava">Strava</span><span class="contact-sep">:</span>Duidui H</li>
          <li><svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg><span class="contact-label" data-i18n="contact-linkedin">领英</span><span class="contact-sep">:</span><a href="https://www.linkedin.com/in/duidui-hu-68488b324/" target="_blank" rel="noopener">Duidui HU</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ═══════════ ENDING ═══════════ -->
<div class="ending-section" id="ending" data-map-id="ending">
  <p style="color:var(--muted);font-size:.85rem;opacity:.6;letter-spacing:1px;line-height:2" data-i18n-html="ending-label">不知不觉就到最后啦<br>请查看小对给你的最后一个彩蛋</p>
  <div class="ending-btns">
    <button type="button" class="quote-trigger" id="quoteTrigger" data-i18n="quote-trigger">点击查看</button>
    <button type="button" class="replay-btn" id="replayBtn" data-i18n="replay-btn">再玩一次</button>
  </div>
</div>
<script>
(function(){
  var qBtn=document.getElementById('quoteTrigger');
  var rBtn=document.getElementById('replayBtn');
  if(qBtn) qBtn.addEventListener('click',function(e){
    e.preventDefault();e.stopPropagation();
    var ov=document.getElementById('quoteOverlay');
    if(!ov)return;
    // Show a random quote
    var Q=(window.SITE_TEXT&&window.SITE_TEXT.quotes)||[];
    var idx=Math.floor(Math.random()*Q.length);
    var txt=document.getElementById('quoteOvText');
    if(txt&&Q.length){
      var lang=document.documentElement.lang==='en'?'en':'cn';
      var q=Q[idx];
      txt.textContent=typeof q==='string'?q:(lang==='en'?(q.en||q.cn):(q.cn||q.en));
      txt.style.opacity='1';
    }
    ov.classList.add('show');
    document.body.style.overflow='hidden';
    document.documentElement.style.overflow='hidden';
    // Store index globally for prev/next
    window._quoteIdx=idx;
  });
  if(rBtn) rBtn.addEventListener('click',function(e){
    e.preventDefault();e.stopPropagation();
    if(window.resetApp){window.resetApp();return;}
    // Inline fallback reset
    document.querySelectorAll('.unlock-overlay,.quote-overlay,.completion-overlay,.map-overlay').forEach(function(o){o.classList.remove('show','open');});
    document.body.style.overflow='';document.documentElement.style.overflow='';
    document.documentElement.style.scrollBehavior='auto';
    window.scrollTo(0,0);
    setTimeout(function(){document.documentElement.style.scrollBehavior='';},50);
  });
})();
</script>

<!-- ═══════════ QUOTE OVERLAY ═══════════ -->
<div id="quoteOverlay" class="quote-overlay">
  <div class="quote-ov-content">
    <div class="quote-ov-close" id="quoteClose">&times;</div>
    <div class="quote-ov-text" id="quoteOvText"></div>
    <div class="quote-ov-controls">
      <button type="button" class="quote-ov-btn" id="quotePrev" data-i18n="quote-prev">上一句</button>
      <button type="button" class="quote-ov-btn" id="quoteNext" data-i18n="quote-next">换一句</button>
    </div>
    <div class="quote-ov-dismiss" data-i18n="quote-close">点击空白处关闭</div>
  </div>
</div>
<script>
(function(){
  var ov=document.getElementById('quoteOverlay');
  var txt=document.getElementById('quoteOvText');
  var prev=document.getElementById('quotePrev');
  var next=document.getElementById('quoteNext');
  var cls=document.getElementById('quoteClose');
  if(!ov)return;
  var Q=(window.SITE_TEXT&&window.SITE_TEXT.quotes)||[];
  function getQ(i){
    if(!Q.length)return'';
    var lang=document.documentElement.lang==='en'?'en':'cn';
    var q=Q[((i%Q.length)+Q.length)%Q.length];
    return typeof q==='string'?q:(lang==='en'?(q.en||q.cn):(q.cn||q.en));
  }
  function closeOv(){ov.classList.remove('show');document.body.style.overflow='';document.documentElement.style.overflow='';}
  function showQ(i){
    window._quoteIdx=((i%Q.length)+Q.length)%Q.length;
    if(txt){txt.style.opacity='0';setTimeout(function(){txt.textContent=getQ(window._quoteIdx);txt.style.opacity='1';},200);}
  }
  ov.addEventListener('click',function(e){if(e.target===ov||e.target.classList.contains('quote-ov-dismiss'))closeOv();});
  if(cls)cls.addEventListener('click',function(e){e.stopPropagation();closeOv();});
  if(prev)prev.addEventListener('click',function(e){e.stopPropagation();showQ((window._quoteIdx||0)-1);});
  if(next)next.addEventListener('click',function(e){e.stopPropagation();showQ((window._quoteIdx||0)+1);});
})();
</script>

<!-- ═══════════ ILLUSTRATED MAP ═══════════ -->
<div id="map-overlay" class="map-overlay">
  <div class="map-close">&times;</div>
  <div class="map-overlay-title" data-i18n="map-title">— 冒险地图 —</div>
  <div class="map-svg-wrap">
  <svg class="illustrated-map" viewBox="0 0 1400 620" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="msky" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" style="stop-color:var(--msky1)"/><stop offset="60%" style="stop-color:var(--msky2)"/><stop offset="100%" style="stop-color:var(--msky3)"/></linearGradient>
      <linearGradient id="mgrass" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" style="stop-color:var(--mgrass1)"/><stop offset="100%" style="stop-color:var(--mgrass2)"/></linearGradient>
      <linearGradient id="mwater" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#38bdf8" stop-opacity=".5"/><stop offset="100%" stop-color="#0284c7" stop-opacity=".3"/></linearGradient>
    </defs>
    <rect width="1400" height="620" fill="url(#msky)"/>
    <g class="map-star"><circle cx="80" cy="40" r="1.5" fill="#fbbf24" opacity=".5"/><circle cx="350" cy="55" r="1" fill="#fff" opacity=".4"/><circle cx="600" cy="35" r="1.5" fill="#fbbf24" opacity=".5"/><circle cx="850" cy="50" r="1" fill="#fff" opacity=".3"/><circle cx="1050" cy="40" r="1.5" fill="#fbbf24" opacity=".5"/><circle cx="1300" cy="55" r="1" fill="#fff" opacity=".4"/></g>
    <g class="map-sun"><circle cx="1250" cy="80" r="35" fill="#FFF9C4" opacity=".2"/><circle cx="1250" cy="80" r="24" fill="#FFD54F" opacity=".8"/><circle cx="1250" cy="80" r="15" fill="#FFECB3"/></g>
    <!-- Rolling hills terrain — gentle, smooth curves -->
    <path d="M0,525 C60,520 110,510 160,495 C230,470 290,435 360,405 C430,375 465,345 500,320 C535,295 565,320 610,370 C660,420 695,460 720,472 C745,460 785,435 840,415 C890,395 930,385 970,365 C1010,345 1055,320 1100,310 C1145,300 1200,335 1250,375 C1300,405 1360,430 1400,442 L1400,620 L0,620 Z" fill="url(#mgrass)"/>
    <path d="M0,555 C70,548 140,530 210,510 C310,480 410,430 500,380 C560,350 610,380 680,450 C720,480 750,470 800,445 C860,420 920,400 980,375 C1040,350 1080,335 1100,330 C1150,320 1210,365 1280,405 C1340,430 1380,450 1400,460 L1400,620 L0,620 Z" style="fill:var(--mgrass3)" opacity=".35"/>
    <!-- Lake in valley -->
    <ellipse cx="720" cy="478" rx="80" ry="16" fill="url(#mwater)"/>
    <!-- Dotted path -->
    <path d="M60,505 C110,496 170,478 260,440 C340,410 420,365 470,340 C520,315 560,335 610,375 C660,420 700,460 720,465 C750,450 800,430 860,410 C920,390 960,370 1020,345 C1070,325 1100,310 1140,315 C1190,335 1240,370 1290,395 C1330,415 1370,432 1400,442" fill="none" stroke="rgba(212,175,116,.18)" stroke-width="3" stroke-dasharray="8 5"/>
    <!-- Decorative trees -->
    <g opacity=".3">
      <rect x="55" y="498" width="4" height="11" fill="#78350f"/><circle cx="57" cy="493" r="9" style="fill:var(--mgrass1)"/>
      <rect x="220" y="448" width="4" height="9" fill="#78350f"/><circle cx="222" cy="443" r="7" style="fill:var(--mgrass3)"/>
      <rect x="430" y="350" width="3" height="8" fill="#78350f"/><circle cx="432" cy="345" r="6" style="fill:var(--mgrass1)"/>
      <rect x="635" y="425" width="3" height="7" fill="#78350f"/><circle cx="637" cy="421" r="6" style="fill:var(--mgrass3)"/>
      <rect x="835" y="410" width="3" height="8" fill="#78350f"/><circle cx="837" cy="405" r="7" style="fill:var(--mgrass1)"/>
      <rect x="1210" y="370" width="3" height="8" fill="#78350f"/><circle cx="1212" cy="365" r="6" style="fill:var(--mgrass3)"/>
      <rect x="1355" y="428" width="3" height="7" fill="#78350f"/><circle cx="1357" cy="423" r="6" style="fill:var(--mgrass1)"/>
    </g>
    <!-- Small flowers -->
    <g opacity=".25"><circle cx="170" cy="476" r="3" fill="#f472b6"/><circle cx="178" cy="473" r="2.5" fill="#fb923c"/><circle cx="395" cy="388" r="2.5" fill="#a78bfa"/><circle cx="780" cy="442" r="3" fill="#34d399"/><circle cx="960" cy="378" r="2.5" fill="#f472b6"/><circle cx="1350" cy="425" r="2.5" fill="#fbbf24"/></g>
    <!-- 1. 关键词影院 — 山脚 (terrain ~504) -->
    <g class="map-building unlocked" data-target="hero">
      <ellipse cx="130" cy="504" rx="46" ry="6" fill="rgba(0,0,0,.12)"/>
      <rect x="90" y="433" width="80" height="71" rx="5" fill="#4338ca"/><rect x="90" y="433" width="80" height="10" rx="5" fill="#6366f1"/>
      <rect x="99" y="450" width="62" height="38" rx="2" fill="#312e81"/>
      <circle cx="98" cy="439" r="1.8" fill="#fbbf24"/><circle cx="109" cy="439" r="1.8" fill="#f87171"/><circle cx="120" cy="439" r="1.8" fill="#34d399"/><circle cx="131" cy="439" r="1.8" fill="#60a5fa"/><circle cx="142" cy="439" r="1.8" fill="#fbbf24"/><circle cx="153" cy="439" r="1.8" fill="#f87171"/>
      <text x="130" y="530" class="map-label" data-i18n="map-b-hero">关键词影院</text>
    </g>
    <!-- 2. 兴趣游乐场 — 山腰 (terrain ~426) -->
    <g class="map-building" data-target="interest">
      <rect x="270" y="349" width="80" height="80" fill="transparent"/>
      <circle cx="310" cy="389" r="37" fill="none" stroke="#ec4899" stroke-width="3" opacity=".7"/>
      <circle cx="310" cy="389" r="3.5" fill="#fbbf24"/><circle cx="310" cy="352" r="5.8" fill="#f472b6"/><circle cx="347" cy="389" r="5.8" fill="#a78bfa"/><circle cx="310" cy="426" r="5.8" fill="#34d399"/><circle cx="273" cy="389" r="5.8" fill="#60a5fa"/>
      <text x="310" y="454" class="map-label" data-i18n="map-b-interest">兴趣游乐场</text>
    </g>
    <!-- 3. 事业大楼 — 山顶 (terrain ~320) -->
    <g class="map-building" data-target="career">
      <ellipse cx="500" cy="320" rx="39" ry="5" fill="rgba(0,0,0,.1)"/>
      <rect x="468" y="222" width="64" height="98" rx="3" fill="#d97706"/><rect x="468" y="222" width="64" height="98" rx="3" fill="rgba(255,255,255,.06)"/>
      <polygon points="500,200 481,222 519,222" fill="#b45309"/><circle cx="500" cy="211" r="4.6" fill="#fbbf24" opacity=".65"/>
      <rect x="476" y="232" width="10" height="10" rx="1" fill="rgba(254,243,199,.3)"/><rect x="493" y="232" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="510" y="232" width="10" height="10" rx="1" fill="rgba(254,243,199,.3)"/>
      <rect x="476" y="250" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="493" y="250" width="10" height="10" rx="1" fill="rgba(254,243,199,.3)"/><rect x="510" y="250" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/>
      <rect x="476" y="268" width="10" height="10" rx="1" fill="rgba(254,243,199,.3)"/><rect x="493" y="268" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="510" y="268" width="10" height="10" rx="1" fill="rgba(254,243,199,.3)"/>
      <rect x="476" y="286" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/><rect x="493" y="286" width="10" height="10" rx="1" fill="rgba(254,243,199,.25)"/><rect x="510" y="286" width="10" height="10" rx="1" fill="rgba(254,243,199,.2)"/>
      <rect x="492" y="302" width="16" height="18" rx="8" fill="rgba(120,53,15,.45)"/>
      <text x="500" y="350" class="map-label" data-i18n="map-b-career">事业大楼</text>
    </g>
    <!-- 4. 知识湖 — 山谷 dock/pier (terrain ~465) -->
    <g class="map-building" data-target="study">
      <rect x="645" y="420" width="115" height="60" fill="transparent"/>
      <!-- Wooden dock platform (starts on shore, extends over water) -->
      <rect x="674" y="460" width="62" height="7" rx="2" fill="#92400e" opacity=".85"/>
      <rect x="674" y="460" width="62" height="2.5" rx="1" fill="#b45309" opacity=".5"/>
      <!-- Plank lines -->
      <line x1="686" y1="460" x2="686" y2="467" stroke="#78350f" stroke-width=".7" opacity=".4"/>
      <line x1="697" y1="460" x2="697" y2="467" stroke="#78350f" stroke-width=".7" opacity=".4"/>
      <line x1="708" y1="460" x2="708" y2="467" stroke="#78350f" stroke-width=".7" opacity=".4"/>
      <line x1="719" y1="460" x2="719" y2="467" stroke="#78350f" stroke-width=".7" opacity=".4"/>
      <!-- Dock support posts into water -->
      <rect x="678" y="465" width="5" height="16" rx="1.2" fill="#78350f" opacity=".6"/>
      <rect x="728" y="465" width="5" height="16" rx="1.2" fill="#78350f" opacity=".6"/>
      <!-- Lamp post on dock -->
      <rect x="736" y="434" width="3.5" height="26" rx="1.2" fill="#78350f" opacity=".7"/>
      <circle cx="737.75" cy="430" r="6" fill="#fbbf24" opacity=".35"/><circle cx="737.75" cy="430" r="3.5" fill="#fde68a" opacity=".6"/>
      <!-- Rope railing -->
      <path d="M680,457 Q710,451 738,457" fill="none" stroke="#a16207" stroke-width="1.2" opacity=".4" stroke-dasharray="2.5 1.5"/>
      <!-- Small book on dock -->
      <rect x="692" y="455" width="10" height="6" rx="1" fill="#4338ca" opacity=".6"/><rect x="693" y="456" width="8" height="4" rx=".5" fill="#6366f1" opacity=".5"/>
      <text x="706" y="502" class="map-label" data-i18n="map-b-study">知识湖</text>
    </g>
    <!-- 5. 故事杂货铺 — 半山腰 (terrain ~393) -->
    <g class="map-building" data-target="worldmap">
      <ellipse cx="900" cy="393" rx="33" ry="5" fill="rgba(0,0,0,.1)"/>
      <rect x="873" y="349" width="55" height="44" rx="3" fill="#047857"/>
      <path d="M868,349 L933,349 L929,337 L873,337 Z" fill="#059669"/><path d="M873,337 C883,332 893,342 900,337 C907,332 917,342 929,337" fill="none" stroke="#34d399" stroke-width="1.8"/>
      <rect x="879" y="358" width="42" height="18" rx="1" fill="rgba(209,250,229,.15)"/><text x="900" y="372" text-anchor="middle" font-size="8" fill="rgba(209,250,229,.5)" font-weight="700">MAPS</text>
      <rect x="893" y="379" width="14" height="14" rx="7" fill="rgba(2,120,87,.4)"/>
      <text x="900" y="424" class="map-label" data-i18n="map-b-worldmap">故事杂货铺</text>
    </g>
    <!-- 6. 经历钟楼 — 山顶 (terrain ~310) -->
    <g class="map-building" data-target="timelines">
      <ellipse cx="1100" cy="310" rx="35" ry="5" fill="rgba(0,0,0,.1)"/>
      <rect x="1071" y="239" width="58" height="71" rx="3" fill="#5b21b6"/>
      <polygon points="1100,213 1087,239 1113,239" fill="#7c3aed"/>
      <circle cx="1100" cy="268" r="18" fill="#1e1b4b" stroke="#a78bfa" stroke-width="1.8"/>
      <line x1="1100" y1="268" x2="1100" y2="254" stroke="#fbbf24" stroke-width="1.8" stroke-linecap="round"/>
      <line x1="1100" y1="268" x2="1111" y2="273" stroke="#e0e7ff" stroke-width="1.2" stroke-linecap="round"/>
      <circle cx="1100" cy="268" r="2.3" fill="#fbbf24"/>
      <rect x="1092" y="294" width="16" height="16" rx="2" fill="rgba(91,33,182,.45)"/>
      <text x="1100" y="342" class="map-label" data-i18n="map-b-timelines">经历钟楼</text>
    </g>
    <!-- 7. 技能花园 — 半山腰 (terrain ~395) -->
    <g class="map-building" data-target="skills">
      <rect x="1243" y="328" width="80" height="70" fill="transparent"/>
      <rect x="1277" y="370" width="12" height="25" rx="2.5" fill="#78350f" opacity=".7"/>
      <circle cx="1283" cy="348" r="28" fill="#166534" opacity=".65"/><circle cx="1264" cy="358" r="20" fill="#15803d" opacity=".55"/><circle cx="1302" cy="354" r="22" fill="#14532d" opacity=".55"/><circle cx="1283" cy="332" r="17" fill="#22c55e" opacity=".35"/>
      <circle cx="1268" cy="350" r="4" fill="#fbbf24" opacity=".6"/><circle cx="1298" cy="343" r="3.5" fill="#f87171" opacity=".6"/><circle cx="1280" cy="335" r="3" fill="#fbbf24" opacity=".5"/>
      <text x="1283" y="428" class="map-label" data-i18n="map-b-skills">技能花园</text>
    </g>
  </svg>
  </div>
</div>

<!-- ═══════════ MINIMAP ═══════════ -->
<div id="map-btn">
  <svg viewBox="0 0 130 58" width="130" height="58" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="mms" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" style="stop-color:var(--msky1)"/><stop offset="60%" style="stop-color:var(--msky2)"/><stop offset="100%" style="stop-color:var(--msky3)"/></linearGradient></defs>
    <rect width="130" height="58" rx="6" fill="url(#mms)"/>
    <g class="map-star"><circle cx="11" cy="5" r=".5" fill="#fbbf24" opacity=".5"/><circle cx="48" cy="6" r=".5" fill="#fbbf24" opacity=".6"/><circle cx="88" cy="4" r=".5" fill="#fbbf24" opacity=".5"/><circle cx="121" cy="5" r=".5" fill="#fbbf24" opacity=".5"/><circle cx="28" cy="3" r=".4" fill="#fff" opacity=".3"/><circle cx="68" cy="2" r=".4" fill="#fff" opacity=".3"/><circle cx="107" cy="3" r=".4" fill="#fff" opacity=".4"/></g>
    <g class="map-sun"><circle cx="112" cy="7" r="3.5" fill="#FFF9C4" opacity=".3"/><circle cx="112" cy="7" r="2.2" fill="#FFD54F" opacity=".85"/></g>
    <!-- Rolling hills (matching big map — gentle curves) -->
    <path d="M0,49 C6,48 10,47 15,46 C21,44 27,40 33,38 C40,35 43,32 46,30 C50,28 53,30 57,35 C61,39 64,43 67,44 C69,43 73,40 78,38 C83,37 87,36 90,34 C94,32 97,30 102,29 C106,28 112,31 116,35 C121,38 126,40 130,41 L130,58 L0,58 Z" style="fill:var(--mgrass1)"/>
    <path d="M0,52 C7,51 13,49 20,47 C29,45 38,40 46,35 C52,32 57,36 63,42 C67,45 69,44 74,41 C80,39 86,37 91,35 C97,33 101,31 102,30 C107,29 113,34 119,37 C124,39 128,42 130,43 L130,58 L0,58 Z" style="fill:var(--mgrass3)" opacity=".35"/>
    <ellipse cx="67" cy="45" rx="7" ry="1.5" fill="#38bdf8" opacity=".3"/>
    <path d="M6,47 C12,46 18,43 25,40 C32,37 40,33 46,30 C50,28 54,31 58,36 C63,41 66,44 67,44 C70,42 76,39 82,37 C88,36 93,33 100,30 C106,28 112,32 118,36 C122,38 127,41 130,42" fill="none" stroke="rgba(212,175,116,.18)" stroke-width=".4" stroke-dasharray="1.2 .8"/>
    <!-- Decorative trees -->
    <circle cx="18" cy="44" r=".8" style="fill:var(--mgrass1)" opacity=".3"/><circle cx="40" cy="34" r=".6" style="fill:var(--mgrass3)" opacity=".3"/><circle cx="78" cy="39" r=".6" style="fill:var(--mgrass1)" opacity=".3"/>
    <!-- Mini buildings (scaled ~15% larger, aligned to terrain) -->
    <g class="mini-bld" data-target="hero"><rect x="8.5" y="40" width="7" height="7" rx=".6" fill="#4338ca"/><rect x="8.5" y="40" width="7" height="1" rx=".4" fill="#6366f1"/></g>
    <g class="mini-bld" data-target="interest"><circle cx="29" cy="36.5" r="3.3" fill="none" stroke="#ec4899" stroke-width=".5"/></g>
    <g class="mini-bld" data-target="career"><rect x="43.5" y="21" width="6" height="9" rx=".4" fill="#d97706"/><polygon points="46.5,19 44,21 49,21" fill="#b45309"/></g>
    <g class="mini-bld" data-target="study"><rect x="61.5" y="42" width="6" height=".9" rx=".3" fill="#92400e"/><rect x="62" y="42.5" width=".6" height="2" fill="#78350f" opacity=".6"/><rect x="66.5" y="42.5" width=".6" height="2" fill="#78350f" opacity=".6"/><circle cx="68" cy="41" r=".7" fill="#fde68a" opacity=".6"/></g>
    <g class="mini-bld" data-target="worldmap"><rect x="80.5" y="32.5" width="5.5" height="4.5" rx=".4" fill="#047857"/><path d="M80,32.5 L87,32.5 L86.5,31 L80.5,31 Z" fill="#059669"/></g>
    <g class="mini-bld" data-target="timelines"><rect x="99" y="22" width="6" height="7" rx=".4" fill="#5b21b6"/><circle cx="102" cy="25" r="1.9" fill="#1e1b4b" stroke="#a78bfa" stroke-width=".3"/></g>
    <g class="mini-bld" data-target="skills"><rect x="117.5" y="33.5" width="1.2" height="3" fill="#78350f" opacity=".7"/><circle cx="118.2" cy="32" r="2.7" fill="#166534" opacity=".7"/><circle cx="116.5" cy="33.2" r="1.9" fill="#15803d" opacity=".6"/><circle cx="120" cy="32.5" r="2" fill="#14532d" opacity=".6"/></g>
    <g opacity=".4"><line x1="5" y1="10" x2="125" y2="10" stroke="var(--muted)" stroke-width=".3" stroke-dasharray="1 2"/><text x="65" y="12" text-anchor="middle" font-size="5" style="fill:var(--muted)" font-weight="600" letter-spacing="4" font-family="Inter,sans-serif">EXPLORE</text></g>
  </svg>
</div>

<!-- ═══════════ UNLOCK OVERLAY ═══════════ -->
<div id="unlockOverlay" class="unlock-overlay">
  <div class="unlock-congrats" data-i18n="unlock-congrats">恭喜你解锁新场景</div>
  <div class="unlock-scene" id="unlockText"></div>
  <div class="unlock-dismiss" data-i18n="unlock-dismiss">点击任意处继续</div>
</div>

<!-- ═══════════ SCRIPTS ═══════════ -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="js/data-content.js"></script>
<script src="js/data-modules.js"></script>
<script src="js/0.1-whoami.js"></script>
<script src="js/1.1-interest.js"></script>
<script src="js/1.2-career.js"></script>
<script src="js/1.3-learning.js"></script>
<script src="js/1.4-aboutme.js"></script>
<script src="js/2.1-timeline.js"></script>
<script src="js/2.2-skilltree.js"></script>
<script src="js/app.js"></script>
</body>
</html>
